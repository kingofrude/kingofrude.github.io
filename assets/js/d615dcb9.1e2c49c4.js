"use strict";(self.webpackChunkmy_notebook=self.webpackChunkmy_notebook||[]).push([[407],{3998:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"\u624b\u5199\u4ee3\u7801/JavaScript\u624b\u5199\u7ec3\u4e60","title":"JavaScript \u624b\u5199\u7ec3\u4e60","description":"\u57fa\u7840\u624b\u5199","source":"@site/docs/\u624b\u5199\u4ee3\u7801/JavaScript\u624b\u5199\u7ec3\u4e60.md","sourceDirName":"\u624b\u5199\u4ee3\u7801","slug":"/\u624b\u5199\u4ee3\u7801/JavaScript\u624b\u5199\u7ec3\u4e60","permalink":"/docs/\u624b\u5199\u4ee3\u7801/JavaScript\u624b\u5199\u7ec3\u4e60","draft":false,"unlisted":false,"editUrl":"https://github.com/kingofrude/kingofrude.github.io/edit/main/docs/\u624b\u5199\u4ee3\u7801/JavaScript\u624b\u5199\u7ec3\u4e60.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"\u624b\u5199\u4ee3\u7801","permalink":"/docs/category/\u624b\u5199\u4ee3\u7801"},"next":{"title":"\u4ee3\u7801\u8f93\u51fa\u9898","permalink":"/docs/\u624b\u5199\u4ee3\u7801/\u4ee3\u7801\u8f93\u51fa\u9898"}}');var s=r(4848),l=r(8453);const o={sidebar_position:1},i="JavaScript \u624b\u5199\u7ec3\u4e60",c={},a=[{value:"\u57fa\u7840\u624b\u5199",id:"\u57fa\u7840\u624b\u5199",level:2},{value:"1.\u624b\u5199\u9632\u6296\u51fd\u6570",id:"1\u624b\u5199\u9632\u6296\u51fd\u6570",level:3},{value:"2.\u624b\u5199\u8282\u6d41\u51fd\u6570",id:"2\u624b\u5199\u8282\u6d41\u51fd\u6570",level:3},{value:"3.\u624b\u5199\u6d45\u62f7\u8d1d\u6df1\u62f7\u8d1d",id:"3\u624b\u5199\u6d45\u62f7\u8d1d\u6df1\u62f7\u8d1d",level:3},{value:"\u6d45\u62f7\u8d1d",id:"\u6d45\u62f7\u8d1d",level:4},{value:"Object.assign()",id:"objectassign",level:5},{value:"\u6269\u5c55\u8fd0\u7b97\u7b26",id:"\u6269\u5c55\u8fd0\u7b97\u7b26",level:5},{value:"\u6570\u7ec4\u65b9\u6cd5\u5b9e\u73b0\u6570\u7ec4\u6d45\u62f7\u8d1d",id:"\u6570\u7ec4\u65b9\u6cd5\u5b9e\u73b0\u6570\u7ec4\u6d45\u62f7\u8d1d",level:5},{value:"Array.prototype.slice()",id:"arrayprototypeslice",level:6},{value:"Array.prototype.concat()",id:"arrayprototypeconcat",level:6},{value:"\u624b\u5199\u6d45\u62f7\u8d1d",id:"\u624b\u5199\u6d45\u62f7\u8d1d",level:5},{value:"\u624b\u5199\u6df1\u62f7\u8d1d",id:"\u624b\u5199\u6df1\u62f7\u8d1d",level:5},{value:"4.\u624b\u5199 ajax",id:"4\u624b\u5199-ajax",level:3},{value:"5.\u4f7f\u7528 promise \u5b9e\u73b0 ajax",id:"5\u4f7f\u7528-promise-\u5b9e\u73b0-ajax",level:3},{value:"6.\u624b\u5199 apply call bind",id:"6\u624b\u5199-apply-call-bind",level:3},{value:"apply \u5b9e\u73b0",id:"apply-\u5b9e\u73b0",level:4},{value:"call \u5b9e\u73b0",id:"call-\u5b9e\u73b0",level:4},{value:"bind \u5b9e\u73b0",id:"bind-\u5b9e\u73b0",level:4},{value:"7.\u624b\u5199 promise \u65b9\u6cd5",id:"7\u624b\u5199-promise-\u65b9\u6cd5",level:3},{value:"\u624b\u5199 Promise.all",id:"\u624b\u5199-promiseall",level:4},{value:"<strong>\u624b\u5199 promise.allSettled</strong>",id:"\u624b\u5199-promiseallsettled",level:4},{value:"<strong>\u624b\u5199 promise.finally</strong>",id:"\u624b\u5199-promisefinally",level:4},{value:"\u624b\u5199 promise.race",id:"\u624b\u5199-promiserace",level:4},{value:"<strong>\u624b\u5199 promise.any</strong>",id:"\u624b\u5199-promiseany",level:4},{value:"\u5b9e\u73b0 Promise.resolve",id:"\u5b9e\u73b0-promiseresolve",level:4},{value:"\u5b9e\u73b0 Promise.reject",id:"\u5b9e\u73b0-promisereject",level:4},{value:"8.\u5b9e\u73b0\u51fd\u6570\u67ef\u91cc\u5316",id:"8\u5b9e\u73b0\u51fd\u6570\u67ef\u91cc\u5316",level:3},{value:"1.\u56fa\u5b9a\u53c2\u6570",id:"1\u56fa\u5b9a\u53c2\u6570",level:4},{value:"2.\u4e0d\u56fa\u5b9a\u53c2\u6570",id:"2\u4e0d\u56fa\u5b9a\u53c2\u6570",level:4},{value:"3.\u56fa\u5b9a\u53c2\u6570\u7684 add \u51fd\u6570",id:"3\u56fa\u5b9a\u53c2\u6570\u7684-add-\u51fd\u6570",level:4},{value:"4.\u4e0d\u56fa\u5b9a\u53c2\u6570\u7684 add \u51fd\u6570",id:"4\u4e0d\u56fa\u5b9a\u53c2\u6570\u7684-add-\u51fd\u6570",level:4},{value:"9.\u5b9e\u73b0 new",id:"9\u5b9e\u73b0-new",level:3},{value:"10.\u6a21\u62df Object.create",id:"10\u6a21\u62df-objectcreate",level:3},{value:"11.\u5b9e\u73b0 Instanceof",id:"11\u5b9e\u73b0-instanceof",level:3},{value:"12.\u624b\u5199 promise",id:"12\u624b\u5199-promise",level:3},{value:"\u94fe\u5f0f\u8c03\u7528\u539f\u7406",id:"\u94fe\u5f0f\u8c03\u7528\u539f\u7406",level:4},{value:"\u4e0d\u5b8c\u5168\u5b9e\u73b0\uff08\u6ca1\u6709\u5b8c\u5168\u5b9e\u73b0\u94fe\u5f0f\u8c03\u7528\uff09",id:"\u4e0d\u5b8c\u5168\u5b9e\u73b0\u6ca1\u6709\u5b8c\u5168\u5b9e\u73b0\u94fe\u5f0f\u8c03\u7528",level:4},{value:"\u5b8c\u5168\u89c4\u8303\u5b9e\u73b0",id:"\u5b8c\u5168\u89c4\u8303\u5b9e\u73b0",level:4},{value:"\u5168\u90e8\u65b9\u6cd5\u5b9e\u73b0",id:"\u5168\u90e8\u65b9\u6cd5\u5b9e\u73b0",level:4},{value:"\u901a\u8fc7 A+\u6d4b\u8bd5",id:"\u901a\u8fc7-a\u6d4b\u8bd5",level:4},{value:"13.\u624b\u5199\u6570\u7ec4\u65b9\u6cd5",id:"13\u624b\u5199\u6570\u7ec4\u65b9\u6cd5",level:3},{value:"\u624b\u5199 reduce",id:"\u624b\u5199-reduce",level:4},{value:"\u624b\u5199 forEach",id:"\u624b\u5199-foreach",level:4},{value:"\u624b\u5199 map",id:"\u624b\u5199-map",level:4},{value:"\u624b\u5199 flat",id:"\u624b\u5199-flat",level:4},{value:"\u5b9e\u73b0 filter \u65b9\u6cd5",id:"\u5b9e\u73b0-filter-\u65b9\u6cd5",level:4},{value:"\u5b9e\u73b0 some \u65b9\u6cd5",id:"\u5b9e\u73b0-some-\u65b9\u6cd5",level:4},{value:"\u5b9e\u73b0 every \u65b9\u6cd5",id:"\u5b9e\u73b0-every-\u65b9\u6cd5",level:4},{value:"reduce \u5b9e\u73b0\u4e00\u4e2a map",id:"reduce-\u5b9e\u73b0\u4e00\u4e2a-map",level:4},{value:"14.\u624b\u5199 promisify",id:"14\u624b\u5199-promisify",level:3},{value:"15.\u7528 setTimeout \u5b9e\u73b0 setInterval",id:"15\u7528-settimeout-\u5b9e\u73b0-setinterval",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"javascript-\u624b\u5199\u7ec3\u4e60",children:"JavaScript \u624b\u5199\u7ec3\u4e60"})}),"\n",(0,s.jsx)(n.h2,{id:"\u57fa\u7840\u624b\u5199",children:"\u57fa\u7840\u624b\u5199"}),"\n",(0,s.jsx)(n.h3,{id:"1\u624b\u5199\u9632\u6296\u51fd\u6570",children:"1.\u624b\u5199\u9632\u6296\u51fd\u6570"}),"\n",(0,s.jsx)(n.p,{children:"\u51fd\u6570\u9632\u6296\u662f\u6307\u5728\u4e8b\u4ef6\u88ab\u89e6\u53d1 n \u79d2\u540e\u518d\u6267\u884c\u56de\u8c03\uff0c\u5982\u679c\u5728\u8fd9 n \u79d2\u5185\u4e8b\u4ef6\u53c8\u88ab\u89e6\u53d1\uff0c\u5219\u91cd\u65b0\u8ba1\u65f6\u3002\u8fd9\u53ef\u4ee5\u4f7f\u7528\u5728\u4e00\u4e9b\u70b9\u51fb\u8bf7\u6c42\u7684\u4e8b\u4ef6\u4e0a\uff0c\u907f\u514d\u56e0\u4e3a\u7528\u6237\u7684\u591a\u6b21\u70b9\u51fb\u5411\u540e\u7aef\u53d1\u9001\u591a\u6b21\u8bf7\u6c42\u3002\u5e94\u7528\u573a\u666f\uff1a\u8f93\u5165\u6846\uff0c\u4e0b\u62c9"}),"\n",(0,s.jsx)(n.p,{children:"\u6309\u94ae\u63d0\u4ea4\u573a\u666f\uff1a\u9632\u2f4c\u591a\u6b21\u63d0\u4ea4\u6309\u94ae\uff0c\u53ea\u6267\u2f8f\u6700\u540e\u63d0\u4ea4\u7684\u2f00\u6b21 \u670d\u52a1\u7aef\u9a8c\u8bc1\u573a\u666f\uff1a\u8868\u5355\u9a8c\u8bc1\u9700\u8981\u670d\u52a1\u7aef\u914d\u5408\uff0c\u53ea\u6267\u2f8f\u2f00\u6bb5\u8fde\u7eed\u7684\u8f93\u2f0a\u4e8b\u4ef6\u7684\u6700\u540e\u2f00\u6b21\uff0c\u8fd8\u6709\u641c\u7d22\u8054\u60f3\u8bcd\u529f\u80fd\u7c7b\u4f3c\u2f63\u5b58\u73af\u5883\u8bf7\u2f64"}),"\n",(0,s.jsx)(n.p,{children:"\u8282\u6d41\u662f\u5728\u4e8b\u4ef6\u6301\u7eed\u89e6\u53d1\u65f6\u4ee5\u4e00\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u53bb\u5b9a\u65f6\u6267\u884c\u56de\u8c03"}),"\n",(0,s.jsx)(n.p,{children:"\u51fd\u6570\u8282\u6d41\u662f\u6307\u89c4\u5b9a\u4e00\u4e2a\u5355\u4f4d\u65f6\u95f4\uff0c\u5728\u8fd9\u4e2a\u5355\u4f4d\u65f6\u95f4\u5185\uff0c\u53ea\u80fd\u6709\u4e00\u6b21\u89e6\u53d1\u4e8b\u4ef6\u7684\u56de\u8c03\u51fd\u6570\u6267\u884c\uff0c\u5982\u679c\u5728\u540c\u4e00\u4e2a\u5355\u4f4d\u65f6\u95f4\u5185\u67d0\u4e8b\u4ef6\u88ab\u89e6\u53d1\u591a\u6b21\uff0c\u53ea\u6709\u4e00\u6b21\u80fd\u751f\u6548\u3002\u8282\u6d41\u53ef\u4ee5\u4f7f\u7528\u5728 scroll \u51fd\u6570\u7684\u4e8b\u4ef6\u76d1\u542c\u4e0a\uff0c\u901a\u8fc7\u4e8b\u4ef6\u8282\u6d41\u6765\u964d\u4f4e\u4e8b\u4ef6\u8c03\u7528\u7684\u9891\u7387\u3002"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u9632\u6296\u662f\u6bcf\u9694\u6307\u5b9a\u7684\u65f6\u95f4\u53d1\u8d77\u8bf7\u6c42"})," \u7528\u6237\u6ed1\u52a8\u65f6 \u5b9a\u65f6 / \u5b9a\u6ed1\u52a8\u7684\u9ad8\u5ea6"]}),"\n",(0,s.jsx)(n.p,{children:"\u62d6\u62fd\u573a\u666f\uff1a\u56fa\u5b9a\u65f6\u95f4\u5185\u53ea\u6267\u2f8f\u2f00\u6b21\uff0c\u9632\u2f4c\u8d85\u2fbc\u9891\u6b21\u89e6\u53d1\u4f4d\u7f6e\u53d8\u52a8 \u7f29\u653e\u573a\u666f\uff1a\u76d1\u63a7\u6d4f\u89c8\u5668 resize \u52a8\u753b\u573a\u666f\uff1a\u907f\u514d\u77ed\u65f6\u95f4\u5185\u591a\u6b21\u89e6\u53d1\u52a8\u753b\u5f15\u8d77\u6027\u80fd\u95ee\u9898"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u975e\u7acb\u5373\u9632\u6296"})}),"\n",(0,s.jsx)(n.p,{children:"\u975e\u7acb\u5373\u6267\u884c\u51fd\u6570\uff1a \u591a\u6b21\u89e6\u53d1\u4e8b\u4ef6\uff0c\u53ea\u4f1a\u5728\u6700\u540e\u4e00\u6b21\u89e6\u53d1\u4e8b\u4ef6\u540e\u7b49\u5f85\u8bbe\u5b9a\u7684 wait \u65f6\u95f4\u7ed3\u675f\u65f6\u6267\u884c\u4e00\u6b21"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'function debounce(fn, delay) {\n  let timer = null;\n  return function (...args) {\n    clearTimeout(timer);\n    timer = null;\n    timer = setTimeout(() => {\n      fn.apply(this, args);\n    }, delay);\n  };\n}\nfunction task() {\n  console.log("run task");\n}\nconst debounceTask = debounce(task, 1000);\nwindow.addEventListener("scroll", debounceTask);\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u7acb\u5373\u9632\u6296"})}),"\n",(0,s.jsx)(n.p,{children:"\u7acb\u5373\u6267\u884c\uff1a\u5373\u591a\u6b21\u89e6\u53d1\u4e8b\u4ef6\uff0c\u7b2c\u4e00\u6b21\u4f1a\u7acb\u5373\u6267\u884c\u51fd\u6570\uff0c\u4e4b\u540e\u5728\u8bbe\u5b9a wait \u4e8b\u4ef6\u5185\u89e6\u72af\u7684\u4e8b\u4ef6\u65e0\u6548\uff0c\u4e0d\u4f1a\u6267\u884c\u3002"}),"\n",(0,s.jsxs)(n.p,{children:["\u8bbe\u7f6e clearTimeout \u4e3a\u4ec0\u4e48\u8fd8\u8981 timer=null \u8bbe\u7f6e\u5ef6\u65f6\u5668\u4e4b\u524d\u5148\u6e05\u9664\u4e0b\u5ef6\u65f6\u5668\uff0c\u53ef\u4ee5\u7acb\u5373\u89e6\u53d1\u5783\u573e\u56de\u6536\u673a\u5236\uff0c\u4e0d\u7136\u6bcf\u6b21\u4e8b\u4ef6\u89e6\u53d1\u90fd\u4f1a\u591a\u4e00\u4e2a\u5ef6\u65f6\u5668\uff0c\u5ef6\u65f6\u5668\u4e4b\u95f4\u4e92\u76f8\u5e72\u6270\uff0c\u9020\u6210\u7d0a\u4e71\u3002",(0,s.jsx)(n.strong,{children:"\u6e05\u9664\u5b9a\u65f6\u5668\u540e\u53d8\u91cf\u4ecd\u7136\u4e3a\u6570\u5b57"}),"\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'function debounce(fn, wait) {\n  let timerId = null;\n  let flag = true;\n  return function () {\n    clearTimeout(timerId);\n    if (flag) {\n      fn.apply(this, arguments);\n      flag = false;\n    }\n    timerId = setTimeout(() => {\n      flag = true;\n    }, wait);\n  };\n}\n//\u6d4b\u8bd5\nfunction task() {\n  console.log("run task");\n}\nconst debounceTask = debounce(task, 1000);\nwindow.addEventListener("scroll", debounceTask);\n'})}),"\n",(0,s.jsx)(n.h3,{id:"2\u624b\u5199\u8282\u6d41\u51fd\u6570",children:"2.\u624b\u5199\u8282\u6d41\u51fd\u6570"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u975e\u7acb\u5373\u8282\u6d41"})," \u8fde\u7eed\u70b9\u51fb\u7684\u8bdd\uff0c\u6bcf\u8fc7 wait \u79d2\u6267\u884c\u4e00\u6b21"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'function throttle(fn, time) {\n  let timer = null;\n  return function (...args) {\n    if (!timer) {\n      timer = setTimeout(() => {\n        fn.apply(this, args);\n        timer = null;\n      }, time);\n    }\n  };\n}\nfunction task() {\n  console.log("run task");\n}\nconst throttleTask = throttle(task, 1000);\nwindow.addEventListener("scroll", throttleTask);\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u7acb\u5373\u8282\u6d41"})," \u8fde\u7eed\u70b9\u51fb\u7684\u8bdd\uff0c\u7b2c\u4e00\u4e0b\u70b9\u51fb\u4f1a\u7acb\u5373\u6267\u884c\u4e00\u6b21 \u7136\u540e\u6bcf\u8fc7 wait \u79d2\u6267\u884c\u4e00\u6b21"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'function throttle(fn, delay) {\n  let last = Date.now();\n  return function (...args) {\n    const now = Date.now();\n    if (now - last > delay) {\n      last = now;\n      fn.apply(this, args);\n      console.log(this);\n    }\n  };\n}\nfunction task() {\n  console.log("run task");\n}\nconst throttleTask = throttle(task, 1000);\nwindow.addEventListener("scroll", throttleTask);\n'})}),"\n",(0,s.jsx)(n.h3,{id:"3\u624b\u5199\u6d45\u62f7\u8d1d\u6df1\u62f7\u8d1d",children:"3.\u624b\u5199\u6d45\u62f7\u8d1d\u6df1\u62f7\u8d1d"}),"\n",(0,s.jsx)(n.p,{children:"\u6d45\u62f7\u8d1d\u662f\u6307\uff0c\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\u5bf9\u539f\u59cb\u5bf9\u8c61\u7684\u5c5e\u6027\u503c\u8fdb\u884c\u7cbe\u786e\u5730\u62f7\u8d1d\uff0c\u5982\u679c\u62f7\u8d1d\u7684\u662f\u57fa\u672c\u6570\u636e\u7c7b\u578b\uff0c\u62f7\u8d1d\u7684\u5c31\u662f\u57fa\u672c\u6570\u636e\u7c7b\u578b\u7684\u503c\uff0c\u5982\u679c\u662f\u5f15\u7528\u6570\u636e\u7c7b\u578b\uff0c\u62f7\u8d1d\u7684\u5c31\u662f\u5185\u5b58\u5730\u5740\u3002\u5982\u679c\u5176\u4e2d\u4e00\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\u5185\u5b58\u5730\u5740\u53d1\u751f\u6539\u53d8\uff0c\u53e6\u4e00\u4e2a\u5bf9\u8c61\u4e5f\u4f1a\u53d1\u751f\u53d8\u5316\u3002"}),"\n",(0,s.jsx)(n.h4,{id:"\u6d45\u62f7\u8d1d",children:"\u6d45\u62f7\u8d1d"}),"\n",(0,s.jsx)(n.h5,{id:"objectassign",children:"Object.assign()"}),"\n",(0,s.jsx)(n.p,{children:"Object.assign() \u662f ES6 \u4e2d\u5bf9\u8c61\u7684\u62f7\u8d1d\u65b9\u6cd5\uff0c\u63a5\u53d7\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u76ee\u6807\u5bf9\u8c61\uff0c\u5176\u4f59\u53c2\u6570\u662f\u6e90\u5bf9\u8c61\uff0c\u7528\u6cd5\uff1a Object.assign(target, source1, \xb7\xb7\xb7) \uff0c\u8be5\u65b9\u6cd5\u53ef\u4ee5\u5b9e\u73b0\u6d45\u62f7\u8d1d\uff0c\u4e5f\u53ef\u4ee5\u5b9e\u73b0\u4e00\u7ef4\u5bf9\u8c61\u7684\u6df1\u62f7\u8d1d\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"let target = { a: 1 };\nlet object2 = { b: 2 };\nlet object3 = { c: 3 };\nObject.assign(target, object2, object3);\nconsole.log(target); // {a: 1, b: 2, c: 3}\n"})}),"\n",(0,s.jsx)(n.h5,{id:"\u6269\u5c55\u8fd0\u7b97\u7b26",children:"\u6269\u5c55\u8fd0\u7b97\u7b26"}),"\n",(0,s.jsx)(n.p,{children:"\u4f7f\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\u53ef\u4ee5\u5728\u6784\u9020\u5b57\u9762\u91cf\u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u8fdb\u884c\u5c5e\u6027\u7684\u62f7\u8d1d\u3002\u8bed\u6cd5\uff1a let cloneObj = {...obj};"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"let obj1 = { a: 1, b: { c: 1 } };\nlet obj2 = { ...obj1 };\nobj1.a = 2;\nconsole.log(obj1);\n//{a:2,b:{c:1}}\nconsole.log(obj2);\n//{a:1,b:{c:1}}\nobj1.b.c = 2;\nconsole.log(obj1);\n//{a:2,b:{c:2}}\nconsole.log(obj2);\n//{a:1,b:{c:2}}\n"})}),"\n",(0,s.jsx)(n.h5,{id:"\u6570\u7ec4\u65b9\u6cd5\u5b9e\u73b0\u6570\u7ec4\u6d45\u62f7\u8d1d",children:"\u6570\u7ec4\u65b9\u6cd5\u5b9e\u73b0\u6570\u7ec4\u6d45\u62f7\u8d1d"}),"\n",(0,s.jsx)(n.h6,{id:"arrayprototypeslice",children:"Array.prototype.slice()"}),"\n",(0,s.jsx)(n.p,{children:"array.slice(start, end)"}),"\n",(0,s.jsx)(n.p,{children:"\u4ece\u5df2\u6709\u6570\u7ec4\u4e2d\u8fd4\u56de\u9009\u5b9a\u7684\u5143\u7d20\uff0c\u8be5\u65b9\u6cd5\u6709\u4e24\u4e2a\u53c2\u6570\uff0c\u4e24\u4e2a\u53c2\u6570\u90fd\u53ef\u9009\uff0c\u5982\u679c\u4e24\u4e2a\u53c2\u6570\u90fd\u4e0d\u5199\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e2a\u6570\u7ec4\u7684\u6d45\u62f7\u8d1d"}),"\n",(0,s.jsx)(n.h6,{id:"arrayprototypeconcat",children:"Array.prototype.concat()"}),"\n",(0,s.jsx)(n.p,{children:"concat() \u7528\u4e8e\u5408\u5e76\u4e24\u4e2a\u6216\u591a\u4e2a\u6570\u7ec4 \u8fd4\u56de\u4e00\u4e2a\u65b0\u6570\u7ec4"}),"\n",(0,s.jsx)(n.h5,{id:"\u624b\u5199\u6d45\u62f7\u8d1d",children:"\u624b\u5199\u6d45\u62f7\u8d1d"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'function shallowCopy(object) {\n  if (!object || typeof object !== "object") return;\n  let newObject = Array.isArray(object) ? [] : {};\n  for (let key in object) {\n    if (object.hasOwnProperty(key)) {\n      newObject[key] = object[key];\n    }\n  }\n  return newObject;\n}\n'})}),"\n",(0,s.jsx)(n.h5,{id:"\u624b\u5199\u6df1\u62f7\u8d1d",children:"\u624b\u5199\u6df1\u62f7\u8d1d"}),"\n",(0,s.jsx)(n.p,{children:"\u652f\u6301\u5bf9\u8c61\u3001\u6570\u7ec4\u3001\u65e5\u671f\u3001\u6b63\u5219\u7684\u62f7\u8d1d\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u5904\u7406\u539f\u59cb\u7c7b\u578b\uff08\u539f\u59cb\u7c7b\u578b\u76f4\u63a5\u8fd4\u56de\uff0c\u53ea\u6709\u5f15\u7528\u7c7b\u578b\u624d\u6709\u6df1\u62f7\u8d1d\u8fd9\u4e2a\u6982\u5ff5\uff09\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u5904\u7406 Symbol \u4f5c\u4e3a\u952e\u540d\u7684\u60c5\u51b5\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u5904\u7406\u51fd\u6570\uff08\u51fd\u6570\u76f4\u63a5\u8fd4\u56de\uff0c\u62f7\u8d1d\u51fd\u6570\u6ca1\u6709\u610f\u4e49\uff0c\u4e24\u4e2a\u5bf9\u8c61\u4f7f\u7528\u5185\u5b58\u4e2d\u540c\u4e00\u4e2a\u5730\u5740\u7684\u51fd\u6570\uff0c\u95ee\u9898\u4e0d\u5927\uff09\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u5904\u7406 DOM \u5143\u7d20\uff08DOM \u5143\u7d20\u76f4\u63a5\u8fd4\u56de\uff0c\u62f7\u8d1d DOM \u5143\u7d20\u6ca1\u6709\u610f\u4e49\uff0c\u90fd\u662f\u6307\u5411\u9875\u9762\u4e2d\u540c\u4e00\u4e2a\uff09\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u989d\u5916\u5f00\u8f9f\u4e00\u4e2a\u50a8\u5b58\u7a7a\u95f4 WeakMap\uff0c\u89e3\u51b3\u5faa\u73af\u5f15\u7528\u9012\u5f52\u7206\u6808\u95ee\u9898\uff08\u5f15\u5165 WeakMap \u7684\u53e6\u4e00\u4e2a\u610f\u4e49\uff0c\u914d\u5408\u5783\u573e\u56de\u6536\u673a\u5236\uff0c\u9632\u6b62\u5185\u5b58\u6cc4\u6f0f\uff09\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'function deepClone(target, hash = new WeakMap()) {\n  // \u989d\u5916\u5f00\u8f9f\u4e00\u4e2a\u5b58\u50a8\u7a7a\u95f4WeakMap\u6765\u5b58\u50a8\u5f53\u524d\u5bf9\u8c61\n  if (target === null) return target; // \u5982\u679c\u662f null \u5c31\u4e0d\u8fdb\u884c\u62f7\u8d1d\u64cd\u4f5c\n  if (target instanceof Date) return new Date(target); // \u5904\u7406\u65e5\u671f\n  if (target instanceof RegExp) return new RegExp(target); // \u5904\u7406\u6b63\u5219\n  if (target instanceof HTMLElement) return target; // \u5904\u7406 DOM\u5143\u7d20\n\n  if (typeof target !== "object") return target; // \u5904\u7406\u539f\u59cb\u7c7b\u578b\u548c\u51fd\u6570 \u4e0d\u9700\u8981\u6df1\u62f7\u8d1d\uff0c\u76f4\u63a5\u8fd4\u56de\n\n  // \u662f\u5f15\u7528\u7c7b\u578b\u7684\u8bdd\u5c31\u8981\u8fdb\u884c\u6df1\u62f7\u8d1d\n  if (hash.get(target)) return hash.get(target); // \u5f53\u9700\u8981\u62f7\u8d1d\u5f53\u524d\u5bf9\u8c61\u65f6\uff0c\u5148\u53bb\u5b58\u50a8\u7a7a\u95f4\u4e2d\u627e\uff0c\u5982\u679c\u6709\u7684\u8bdd\u76f4\u63a5\u8fd4\u56de\n  const cloneTarget = new target.constructor(); // \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u514b\u9686\u5bf9\u8c61\u6216\u514b\u9686\u6570\u7ec4\n  hash.set(target, cloneTarget); // \u5982\u679c\u5b58\u50a8\u7a7a\u95f4\u4e2d\u6ca1\u6709\u5c31\u5b58\u8fdb hash \u91cc\n\n  Reflect.ownKeys(target).forEach((key) => {\n    // \u5f15\u5165 Reflect.ownKeys\uff0c\u5904\u7406 Symbol \u4f5c\u4e3a\u952e\u540d\u7684\u60c5\u51b5\n    cloneTarget[key] = deepClone(target[key], hash); // \u9012\u5f52\u62f7\u8d1d\u6bcf\u4e00\u5c42\n  });\n  return cloneTarget; // \u8fd4\u56de\u514b\u9686\u7684\u5bf9\u8c61\n}\n\nconst obj = {\n  a: true,\n  b: 100,\n  c: "str",\n  d: undefined,\n  e: null,\n  f: Symbol("f"),\n  g: {\n    g1: {}, // \u6df1\u5c42\u5bf9\u8c61\n  },\n  h: [], // \u6570\u7ec4\n  i: new Date(), // Date\n  j: /abc/, // \u6b63\u5219\n  k: function () {}, // \u51fd\u6570\n  l: [document.getElementById("foo")], // \u5f15\u5165 WeakMap \u7684\u610f\u4e49\uff0c\u5904\u7406\u53ef\u80fd\u88ab\u6e05\u9664\u7684 DOM \u5143\u7d20\n};\nobj.obj = obj; // \u5faa\u73af\u5f15\u7528\nconst name = Symbol("name");\nobj[name] = "lin"; // Symbol \u4f5c\u4e3a\u952e\nconst newObj = deepClone(obj);\nconsole.log(newObj);\n'})}),"\n",(0,s.jsx)(n.h3,{id:"4\u624b\u5199-ajax",children:"4.\u624b\u5199 ajax"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u521b\u5efa XMLHttpRequest \u5b9e\u4f8b"}),"\n",(0,s.jsx)(n.li,{children:"\u53d1\u51fa HTTP \u8bf7\u6c42"}),"\n",(0,s.jsx)(n.li,{children:"\u63a5\u6536\u670d\u52a1\u5668\u4f20\u56de\u7684\u6570\u636e"}),"\n",(0,s.jsx)(n.li,{children:"\u66f4\u65b0\u7f51\u9875\u6570\u636e"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'function handleGet(url) {\n  var response = "";\n  //1.\u521b\u5efa\u5bf9\u8c61\n  var xhr = new XMLHttpRequest();\n  //2.\u8bbe\u7f6e\u65b9\u6cd5\n  xhr.open("GET", url);\n  //3.\u53d1\u9001\u8bf7\u6c42\n  xhr.send();\n  //4.\u8fd4\u56de\u7ed3\u679c\n  xhr.onreadystatechange = function () {\n    if (xhr.readyState == 4) {\n      if (xhr.status >= 200 && xhr.status < 300) {\n        response = xhr.responseText;\n        console.log(response, "1");\n      } else {\n        return "Error" + xhr.status;\n      }\n    }\n  };\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"5\u4f7f\u7528-promise-\u5b9e\u73b0-ajax",children:"5.\u4f7f\u7528 promise \u5b9e\u73b0 ajax"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'// promise \u5c01\u88c5\u5b9e\u73b0\uff1a\nfunction getJSON(url) {\n  // \u521b\u5efa\u4e00\u4e2a promise \u5bf9\u8c61\n  let promise = new Promise(function (resolve, reject) {\n    let xhr = new XMLHttpRequest();\n    // \u65b0\u5efa\u4e00\u4e2a http \u8bf7\u6c42\n    xhr.open("GET", url, true);\n    // \u8bbe\u7f6e\u72b6\u6001\u7684\u76d1\u542c\u51fd\u6570\n    xhr.onreadystatechange = function () {\n      if (this.readyState !== 4) return;\n      // \u5f53\u8bf7\u6c42\u6210\u529f\u6216\u5931\u8d25\u65f6\uff0c\u6539\u53d8 promise \u7684\u72b6\u6001\n      if (this.status === 200) {\n        resolve(this.response);\n      } else {\n        reject(new Error(this.statusText));\n      }\n    };\n    // \u8bbe\u7f6e\u9519\u8bef\u76d1\u542c\u51fd\u6570\n    xhr.onerror = function () {\n      reject(new Error(this.statusText));\n    };\n    // \u8bbe\u7f6e\u54cd\u5e94\u7684\u6570\u636e\u7c7b\u578b\n    xhr.responseType = "json";\n    // \u8bbe\u7f6e\u8bf7\u6c42\u5934\u4fe1\u606f\n    xhr.setRequestHeader("Accept", "application/json");\n    // \u53d1\u9001 http \u8bf7\u6c42\n    xhr.send(null);\n  });\n  return promise;\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"6\u624b\u5199-apply-call-bind",children:"6.\u624b\u5199 apply call bind"}),"\n",(0,s.jsx)(n.h4,{id:"apply-\u5b9e\u73b0",children:"apply \u5b9e\u73b0"}),"\n",(0,s.jsx)(n.p,{children:"\u5224\u65ad\u8c03\u7528\u5bf9\u8c61\u662f\u5426\u4e3a\u51fd\u6570\uff0c\u5373\u4f7f\u6211\u4eec\u662f\u5b9a\u4e49\u5728\u51fd\u6570\u7684\u539f\u578b\u4e0a\u7684\uff0c\u4f46\u662f\u53ef\u80fd\u51fa\u73b0\u4f7f\u7528 call \u7b49\u65b9\u5f0f\u8c03\u7528\u7684\u60c5\u51b5\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u5224\u65ad\u4f20\u5165\u4e0a\u4e0b\u6587\u5bf9\u8c61\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u8bbe\u7f6e\u4e3a window \u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u5c06\u51fd\u6570\u4f5c\u4e3a\u4e0a\u4e0b\u6587\u5bf9\u8c61\u7684\u4e00\u4e2a\u5c5e\u6027\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u5224\u65ad\u53c2\u6570\u503c\u662f\u5426\u4f20\u5165"}),"\n",(0,s.jsx)(n.p,{children:"\u4f7f\u7528\u4e0a\u4e0b\u6587\u5bf9\u8c61\u6765\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u5e76\u4fdd\u5b58\u8fd4\u56de\u7ed3\u679c\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u5220\u9664\u521a\u624d\u65b0\u589e\u7684\u5c5e\u6027"}),"\n",(0,s.jsx)(n.p,{children:"\u8fd4\u56de\u7ed3\u679c"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'Function.prototype.myApply = function (context, args) {\n  context = context || window;\n\n  if (typeof this !== "function") {\n    return new Error("typeError");\n  }\n  context.fn = this;\n  if (args) {\n    result = context.fn(...args);\n  } else {\n    result = context.fn();\n  }\n  delete context.fn;\n  return result;\n};\nfunction bar(age, sex) {\n  return {\n    name: this.name,\n    age,\n    sex,\n  };\n}\nconst obj = {\n  name: "cyx",\n};\nbar.myApply(obj, [22, "\u7537"]); // {name: "cyx", age: 22, sex: "\u7537"}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"call-\u5b9e\u73b0",children:"call \u5b9e\u73b0"}),"\n",(0,s.jsx)(n.p,{children:"\u5224\u65ad\u8c03\u7528\u5bf9\u8c61\u662f\u5426\u4e3a\u51fd\u6570\uff0c\u5373\u4f7f\u6211\u4eec\u662f\u5b9a\u4e49\u5728\u51fd\u6570\u7684\u539f\u578b\u4e0a\u7684\uff0c\u4f46\u662f\u53ef\u80fd\u51fa\u73b0\u4f7f\u7528 call \u7b49\u65b9\u5f0f\u8c03\u7528\u7684\u60c5\u51b5\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u5224\u65ad\u4f20\u5165\u4e0a\u4e0b\u6587\u5bf9\u8c61\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u8bbe\u7f6e\u4e3a window \u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u5904\u7406\u4f20\u5165\u7684\u53c2\u6570\uff0c\u622a\u53d6\u7b2c\u4e00\u4e2a\u53c2\u6570\u540e\u7684\u6240\u6709\u53c2\u6570\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u5c06\u51fd\u6570\u4f5c\u4e3a\u4e0a\u4e0b\u6587\u5bf9\u8c61\u7684\u4e00\u4e2a\u5c5e\u6027\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u4f7f\u7528\u4e0a\u4e0b\u6587\u5bf9\u8c61\u6765\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u5e76\u4fdd\u5b58\u8fd4\u56de\u7ed3\u679c\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u5220\u9664\u521a\u624d\u65b0\u589e\u7684\u5c5e\u6027\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u8fd4\u56de\u7ed3\u679c\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'Function.prototype.myCall = function (context) {\n  context = context || window;\n  if (typeof this !== "function") {\n    throw new Error("typeError");\n  }\n  let result;\n  context.fn = this;\n  let args = [...arguments].slice(1);\n  if (args) {\n    result = context.fn(...args);\n  } else {\n    result = context.fn();\n  }\n  delete context.fn;\n  return result;\n};\nvar obj = {\n  n: 15,\n};\nfunction sum(n, m) {\n  console.log(this);\n  return n + m;\n}\nconsole.log(sum.myCall(obj, 10, 20));\n'})}),"\n",(0,s.jsx)(n.h4,{id:"bind-\u5b9e\u73b0",children:"bind \u5b9e\u73b0"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'// bind \u51fd\u6570\u5b9e\u73b0\nFunction.prototype.myBind = function (context) {\n  // \u5224\u65ad\u8c03\u7528\u5bf9\u8c61\u662f\u5426\u4e3a\u51fd\u6570\n  if (typeof this !== "function") {\n    throw new TypeError("Error");\n  }\n  // \u83b7\u53d6\u53c2\u6570\n  var args = [...arguments].slice(1),\n    fn = this;\n  return function Fn() {\n    // \u6839\u636e\u8c03\u7528\u65b9\u5f0f\uff0c\u4f20\u5165\u4e0d\u540c\u7ed1\u5b9a\u503c\n    return fn.apply(\n      this instanceof Fn ? this : context,\n      args.concat(...arguments)\n    );\n  };\n};\nvar obj = {\n  n: 15,\n};\nfunction sum(n, m) {\n  console.log(this);\n  return n + m;\n}\nvar ans = sum.myBind(obj, 10, 20);\nconsole.log(ans());\n'})}),"\n",(0,s.jsx)(n.h3,{id:"7\u624b\u5199-promise-\u65b9\u6cd5",children:"7.\u624b\u5199 promise \u65b9\u6cd5"}),"\n",(0,s.jsx)(n.h4,{id:"\u624b\u5199-promiseall",children:"\u624b\u5199 Promise.all"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Promise.all(iterable)"})," \u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a ",(0,s.jsx)(n.code,{children:"Promise"})," \u5b9e\u4f8b\uff0c\u6b64\u5b9e\u4f8b\u5728 ",(0,s.jsx)(n.code,{children:"iterable"})," \u53c2\u6570\u5185\u6240\u6709\u7684 ",(0,s.jsx)(n.code,{children:"promise"})," \u90fd\u201c\u5b8c\u6210\uff08resolved\uff09\u201d\u6216\u53c2\u6570\u4e2d\u4e0d\u5305\u542b ",(0,s.jsx)(n.code,{children:"promise"})," \u65f6\u56de\u8c03\u5b8c\u6210\uff08resolve\uff09\uff1b\u5982\u679c\u53c2\u6570\u4e2d ",(0,s.jsx)(n.code,{children:"promise"})," \u6709\u4e00\u4e2a\u5931\u8d25\uff08rejected\uff09\uff0c\u6b64\u5b9e\u4f8b\u56de\u8c03\u5931\u8d25\uff08reject\uff09\uff0c\u5931\u8d25\u539f\u56e0\u7684\u662f\u7b2c\u4e00\u4e2a\u5931\u8d25 ",(0,s.jsx)(n.code,{children:"promise"})," \u7684\u7ed3\u679c"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'function promiseAll(arr) {\n  if (!Array.isArray(arr)) {\n    return new TypeError("must array");\n  }\n  return new Promise((resolve, reject) => {\n    let count = 0,\n      res = Array(arr.length).fill(0);\n    arr.forEach((item, index) => {\n      Promise.resolve(item).then(\n        (value) => {\n          count++;\n          res[index] = value;\n          if (count === arr.length) {\n            resolve(res);\n          }\n        },\n        (value) => {\n          reject(value);\n        }\n      );\n    });\n  });\n}\nfunction test(num, delay) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      num == 4 ? reject(num) : resolve(num);\n    }, delay);\n  });\n}\nlet p1 = test(1, 1000);\nlet p2 = test(2, 2000);\nlet p3 = test(3, 3000);\nlet p4 = test(4, 4000);\nmyPromiseAll([p1, p2, p3]).then((result) => {\n  console.log(result);\n});\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u624b\u5199-promiseallsettled",children:(0,s.jsx)(n.strong,{children:"\u624b\u5199 promise.allSettled"})}),"\n",(0,s.jsxs)(n.p,{children:["**Promise.allSettled()**\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a",(0,s.jsx)(n.code,{children:"promise"}),"\uff0c\u8be5",(0,s.jsx)(n.code,{children:"promise"}),"\u5728\u6240\u6709\u7ed9\u5b9a\u7684",(0,s.jsx)(n.code,{children:"promise"}),"\u5df2\u88ab\u89e3\u6790\u6216\u88ab\u62d2\u7edd\u540e\u89e3\u6790\uff0c\u5e76\u4e14\u6bcf\u4e2a\u5bf9\u8c61\u90fd\u63cf\u8ff0\u6bcf\u4e2a",(0,s.jsx)(n.code,{children:"promise"}),"\u7684\u7ed3\u679c\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Promise.allSettled()"})," \u53ef\u7528\u4e8e\u5e76\u884c\u6267\u884c\u72ec\u7acb\u7684\u5f02\u6b65\u64cd\u4f5c\uff0c\u5e76\u6536\u96c6\u8fd9\u4e9b\u64cd\u4f5c\u7684\u7ed3\u679c"]}),"\n",(0,s.jsxs)(n.p,{children:["\u8be5\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a ",(0,s.jsx)(n.code,{children:"promise"})," \u6570\u7ec4(\u901a\u5e38\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61)\u4f5c\u4e3a\u53c2\u6570:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const statusesPromise = Promise.allSettled(promises);\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5f53\u6240\u6709\u7684\u8f93\u5165 ",(0,s.jsx)(n.code,{children:"promises"})," \u90fd\u88ab ",(0,s.jsx)(n.code,{children:"fulfilled"})," \u6216 ",(0,s.jsx)(n.code,{children:"rejected"})," \u65f6\uff0c",(0,s.jsx)(n.code,{children:"statusesPromise"})," \u4f1a\u89e3\u6790\u4e3a\u4e00\u4e2a\u5177\u6709\u5b83\u4eec\u72b6\u6001\u7684\u6570\u7ec4"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"{ status: 'fulfilled', value: value }"})," \u2014 \u5982\u679c\u5bf9\u5e94\u7684 promise \u5df2\u7ecf ",(0,s.jsx)(n.code,{children:"fulfilled"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u6216\u8005 ",(0,s.jsx)(n.code,{children:"{status: 'rejected'\uff0c reason: reason}"})," \u5982\u679c\u76f8\u5e94\u7684 promise \u5df2\u7ecf\u88ab ",(0,s.jsx)(n.code,{children:"rejected"})]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'// \u5199\u6cd5\u4e00\nfunction promiseAllSettled(arr) {\n  if (!Array.isArray(arr)) {\n    return new TypeError("must array");\n  }\n  return new Promise((resolve, reject) => {\n    let count = 0,\n      res = Array(arr.length).fill(0);\n    arr.forEach((item, index) => {\n      Promise.resolve(item).then(\n        (value) => {\n          count++;\n          res[index] = { status: "fulfilled", value: value };\n          if (count === arr.length) {\n            resolve(res);\n          }\n        },\n        (error) => {\n          count++;\n          res[index] = { status: "rejected", reason: error };\n          if (count === arr.length) {\n            resolve(res);\n          }\n        }\n      );\n    });\n  });\n}\n// \u5199\u6cd5\u4e8c \u63a8\u8350\u8fd9\u79cd \u53e6\u5916\uff0c promise.then\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u51fd\u6570\u6355\u83b7\u9519\u8bef\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e.catch\u6355\u83b7\u9519\u8bef\u7684\u4f18\u5148\u7ea7\uff0c\u4e14\u7b2c\u4e8c\u4e2a\u6355\u83b7\u9519\u8bef\u4e4b\u540e\uff0ccatch\u4fbf\u4e0d\u518d\u6355\u83b7\u3002\nfunction PromiseAllSettled(list) {\n  return new Promise((resolve) => {\n    let result = [];\n    let count = 0;\n    list.forEach((item, index) => {\n      item\n        .then((res) => {\n          result[index] = { status: "fulfilled", value: res };\n        })\n        .catch((err) => {\n          result[index] = { status: "rejected", reason: err };\n        })\n        .finally(() => {\n          count++;\n          count === list.length && resolve(result);\n        });\n    });\n  });\n}\nconst promiseList = [\n  new Promise((resolve) => setTimeout(() => resolve("\u6210\u529f1"), 2000)),\n  new Promise((resolve, reject) => setTimeout(() => reject("\u5931\u8d251"), 1000)),\n  new Promise((resolve) => setTimeout(() => resolve("\u6210\u529f3"), 2600)),\n  new Promise((resolve) => setTimeout(() => resolve("\u6210\u529f4"), 2300)),\n];\nPromiseAllSettled(promiseList).then((res) => console.log(res));\nPromise.allSettled(promiseList).then((res) => console.log(res));\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u624b\u5199-promisefinally",children:(0,s.jsx)(n.strong,{children:"\u624b\u5199 promise.finally"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"finally()"})," \u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a",(0,s.jsx)(n.a,{href:"https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FPromise",children:(0,s.jsx)(n.code,{children:"Promise"})}),"\u3002\u5728 promise \u7ed3\u675f\u65f6\uff0c\u65e0\u8bba\u7ed3\u679c\u662f fulfilled \u6216\u8005\u662f rejected\uff0c\u90fd\u4f1a\u6267\u884c\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u3002\u8fd9\u4e3a\u5728",(0,s.jsx)(n.code,{children:"Promise"}),"\u662f\u5426\u6210\u529f\u5b8c\u6210\u540e\u90fd\u9700\u8981\u6267\u884c\u7684\u4ee3\u7801\u63d0\u4f9b\u4e86\u4e00\u79cd\u65b9\u5f0f\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u8fd9\u907f\u514d\u4e86\u540c\u6837\u7684\u8bed\u53e5\u9700\u8981\u5728",(0,s.jsx)(n.a,{href:"https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FPromise%2Fthen",children:(0,s.jsx)(n.code,{children:"then()"})}),"\u548c",(0,s.jsx)(n.a,{href:"https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FPromise%2Fcatch",children:(0,s.jsx)(n.code,{children:"catch()"})}),"\u4e2d\u5404\u5199\u4e00\u6b21\u7684\u60c5\u51b5\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u7b80\u5355\u7406\u89e3"}),"\uff1afinally \u7684\u7279\u70b9 \u65e0\u8bba\u5982\u4f55\u90fd\u6267\u884c \uff0c\u4f46\u662f\u5982\u679c\u8fd4\u56de\u7684\u662f\u4e00\u4e2a promise \u9700\u8981\u7b49\u5f85\u8fd9\u4e2a promise \u4e4b\u884c\u5b8c\u5728\u7ee7\u7eed\u5411\u4e0b\u6267\u884c"]}),"\n",(0,s.jsxs)(n.p,{children:["finally \u540e\u9762\u8fd8\u53ef\u4ee5.then .then \u6240\u4ee5 finally \u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a",(0,s.jsx)(n.code,{children:"then"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"Promise.prototype.finally = function (cb) {\n  return this.then(\n    (data) => {\n      // \u5982\u4f55\u4fdd\u8bc1Promise.then\u80fd\u591f\u6267\u884c\u5b8c\u6bd5\n      return Promise.resolve(cb()).then((n) => data);\n    },\n    (err) => {\n      // Promise.resolve \u76ee\u7684\u662f\u7b49\u5f85cb()\u540e\u7684Promise\u6267\u884c\u5b8c\u6210\n      return Promise.resolve(cb()).then((n) => {\n        throw err;\n      });\n    }\n  );\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u624b\u5199-promiserace",children:"\u624b\u5199 promise.race"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Promise.race(iterable)"})," \u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a ",(0,s.jsx)(n.code,{children:"promise"}),"\uff0c\u4e00\u65e6\u8fed\u4ee3\u5668\u4e2d\u7684\u67d0\u4e2a",(0,s.jsx)(n.code,{children:"promise"}),"\u89e3\u51b3\u6216\u62d2\u7edd\uff0c\u8fd4\u56de\u7684 ",(0,s.jsx)(n.code,{children:"promise"}),"\u5c31\u4f1a\u89e3\u51b3\u6216\u62d2\u7edd\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"function PromiseRace(arrayList) {\n  return new Promise((resolve) => {\n    for (let i = 0; i < arrayList.length; i++) {\n      Promise.resolve(arrayList[i]).then((result) => {\n        resolve(result);\n      });\n    }\n  });\n}\nfunction test(num, time) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      num == 4 ? reject() : resolve(num);\n    }, time);\n  });\n}\nlet p1 = test(1, 2000);\nlet p2 = test(2, 1000);\nlet p3 = test(3, 5000);\nPromiseRace([p3, p1, p2]).then((res) => {\n  console.log(res);\n});\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u624b\u5199-promiseany",children:(0,s.jsx)(n.strong,{children:"\u624b\u5199 promise.any"})}),"\n",(0,s.jsx)(n.p,{children:"\u5168\u90e8\u72b6\u6001\u5931\u8d25\u624d\u8fd4\u56de\u5931\u8d25\uff0c\u5176\u4e2d\u6709\u6210\u529f\u7684\u72b6\u6001\u5c31\u8fd4\u56de\u90a3\u4e2a\u6210\u529f\u7684"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'function promiseAny(list) {\n  return new Promise((resolve, reject) => {\n    let count = 0;\n    list.forEach((item, index) => {\n      item\n        .then((res) => resolve(res))\n        .catch((err) => {\n          count++;\n          count === list.length && reject("\u90fd\u5931\u8d25\u4e86");\n        });\n    });\n  });\n}\n\nconst promiseList = [\n  new Promise((resolve) => setTimeout(() => resolve("\u6210\u529f1"), 3000)),\n  new Promise((resolve, reject) => setTimeout(() => reject("\u5931\u8d251"), 1000)),\n  new Promise((resolve) => setTimeout(() => resolve("\u6210\u529f3"), 2600)),\n  new Promise((resolve) => setTimeout(() => resolve("\u6210\u529f4"), 2300)),\n];\n\npromiseAny(promiseList)\n  .then((res) => console.log(res))\n  .catch((err) => console.log(err));\n\nPromise.any(promiseList)\n  .then((res) => console.log(res))\n  .catch((err) => console.log(err));\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u5b9e\u73b0-promiseresolve",children:"\u5b9e\u73b0 Promise.resolve"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\u5b9e\u73b0 resolve \u9759\u6001\u65b9\u6cd5\u6709\u4e09\u4e2a\u8981\u70b9:"}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u4f20\u53c2\u4e3a\u4e00\u4e2a ",(0,s.jsx)(n.code,{children:"Promise"}),", \u5219\u76f4\u63a5\u8fd4\u56de\u5b83\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:["\u4f20\u53c2\u4e3a\u4e00\u4e2a ",(0,s.jsx)(n.code,{children:"thenable"})," \u5bf9\u8c61\uff0c\u8fd4\u56de\u7684 ",(0,s.jsx)(n.code,{children:"Promise"})," \u4f1a\u8ddf\u968f\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u91c7\u7528\u5b83\u7684\u6700\u7ec8\u72b6\u6001\u4f5c\u4e3a\u81ea\u5df1\u7684\u72b6\u6001\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:["\u5176\u4ed6\u60c5\u51b5\uff0c\u76f4\u63a5\u8fd4\u56de\u4ee5\u8be5\u503c\u4e3a\u6210\u529f\u72b6\u6001\u7684",(0,s.jsx)(n.code,{children:"promise"}),"\u5bf9\u8c61\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"Promise.resolve = (param) => {\n  if(param instanceof Promise) return param;\n  return new Promise((resolve, reject) => {\n    if(param && param.then && typeof param.then === 'function') {\n      // param \u72b6\u6001\u53d8\u4e3a\u6210\u529f\u4f1a\u8c03\u7528resolve\uff0c\u5c06\u65b0 Promise \u7684\u72b6\u6001\u53d8\u4e3a\u6210\u529f\uff0c\u53cd\u4e4b\u4ea6\u7136\n      param.then(resolve, reject);\n    }else {\n      resolve(param);\n    }\n  })\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u5b9e\u73b0-promisereject",children:"\u5b9e\u73b0 Promise.reject"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Promise.reject \u4e2d\u4f20\u5165\u7684\u53c2\u6570\u4f1a\u4f5c\u4e3a\u4e00\u4e2a reason \u539f\u5c01\u4e0d\u52a8\u5730\u5f80\u4e0b\u4f20, \u5b9e\u73b0\u5982\u4e0b:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"Promise.reject = function (reason) {\n  return new Promise((resolve, reject) => {\n    reject(reason);\n  });\n};\n"})}),"\n",(0,s.jsx)(n.h3,{id:"8\u5b9e\u73b0\u51fd\u6570\u67ef\u91cc\u5316",children:"8.\u5b9e\u73b0\u51fd\u6570\u67ef\u91cc\u5316"}),"\n",(0,s.jsx)(n.h4,{id:"1\u56fa\u5b9a\u53c2\u6570",children:"1.\u56fa\u5b9a\u53c2\u6570"}),"\n",(0,s.jsx)(n.p,{children:"\u7406\u89e3 arg \u6570\u7ec4\u662f\u4e0d\u65ad\u88ab\u6269\u5c55\u7684 length \u6307\u7684\u662f\u4f20\u5165\u7684 test \u51fd\u6570\u7684\u53c2\u6570\u957f\u5ea6"}),"\n",(0,s.jsx)(n.p,{children:"test \u5b9e\u9645\u4e0a\u5c31\u662f\u5185\u90e8\u7684 temp()"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"function curry(fn) {\n  let length = fn.length;\n  return function temp() {\n    let arg = [...arguments];\n    if (arg.length >= length) {\n      return fn(...arg);\n    } else {\n      return function () {\n        return temp(...arg, ...arguments);\n      };\n    }\n  };\n}\nfunction add(a, b, c) {\n  return a + b + c;\n}\nlet test = curry(add);\nconsole.log(test(1)(2, 3));\n"})}),"\n",(0,s.jsx)(n.h4,{id:"2\u4e0d\u56fa\u5b9a\u53c2\u6570",children:"2.\u4e0d\u56fa\u5b9a\u53c2\u6570"}),"\n",(0,s.jsx)(n.p,{children:"\u901a\u8fc7\u6700\u540e\u4e00\u4e2a\u4e0d\u4f20\u53c2\u6765\u5224\u65ad\u6267\u884c\u7ed3\u675f"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// \u6bcf\u6b21\u8c03\u7528\u7684\u4f20\u8fdb\u6765\u7684\u53c2\u6570\u505a\u7d2f\u8ba1\u5904\u7406\nfunction reduce(...args) {\n  return args.reduce((a, b) => a + b);\n}\nfunction currying(fn) {\n  // \u5b58\u653e\u6bcf\u6b21\u8c03\u7528\u7684\u53c2\u6570\n  let args = [];\n  return function temp(...newArgs) {\n    if (newArgs.length) {\n      // \u6709\u53c2\u6570\u5c31\u5408\u5e76\u8fdb\u53bb\uff0c\u7136\u540e\u8fd4\u56de\u81ea\u8eab\n      args = [...args, ...newArgs];\n      return temp;\n    } else {\n      // \u6ca1\u6709\u53c2\u6570\u4e86\uff0c\u4e5f\u5c31\u662f\u6700\u540e\u4e00\u4e2a\u4e86\uff0c\u6267\u884c\u7d2f\u8ba1\u7ed3\u679c\u64cd\u4f5c\u5e76\u8fd4\u56de\u7ed3\u679c\n      let val = fn.apply(this, args);\n      args = []; //\u4fdd\u8bc1\u518d\u6b21\u8c03\u7528\u65f6\u6e05\u7a7a\n      return val;\n    }\n  };\n}\nlet add = currying(reduce);\nconsole.log(add(1)(2, 3, 4)(5)); //temp{ }\nconsole.log(add(1)(2, 3, 4)(5)()); //15\nconsole.log(add(1)(2, 3)(4, 5)()); //15\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"function curry(fn) {\n        let arg = [...arguments].slice(1);\n        let temp = function temp() {\n          arg = [...arg, ...arguments];\n          return curry(fn, ...arg);\n        };\n        temp.toString = function () {\n          return fn.apply(null, arg);\n        };\n        return temp;\n      }\n\n      function fn() {\n        return [...arguments].reduce((pre, cur) => {\n          return pre + cur;\n        }, 0);\n      }\n      let test = curry(fn);\n\t\t\tconsole.log(test())\n      console.log(test(1)(2, 3)(4)(5);  //temp\n      console.log(test(1)(2, 3)(4)(5).toString());\n"})}),"\n",(0,s.jsx)(n.h4,{id:"3\u56fa\u5b9a\u53c2\u6570\u7684-add-\u51fd\u6570",children:"3.\u56fa\u5b9a\u53c2\u6570\u7684 add \u51fd\u6570"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"function add(x) {\n  let sum = x;\n  let temp = function (y) {\n    sum += y;\n    return temp;\n  };\n  temp.toString = function () {\n    return sum;\n  };\n  return temp;\n}\nlet a = add(1)(2)(4);\nconsole.log(a.toString());\n"})}),"\n",(0,s.jsx)(n.h4,{id:"4\u4e0d\u56fa\u5b9a\u53c2\u6570\u7684-add-\u51fd\u6570",children:"4.\u4e0d\u56fa\u5b9a\u53c2\u6570\u7684 add \u51fd\u6570"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"function add() {\n  let arg = [...arguments];\n  let add = function () {\n    arg.push(...arguments);\n    return add;\n  };\n  add.toString = function () {\n    return arg.reduce((pre, cru) => {\n      return pre + cru;\n    });\n  };\n  return add;\n}\nconsole.log(add(1)(2)(3)(4)(5).toString());\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"add(1); \t\t\t// 1\nadd(1)(2);  \t// 3\nadd(1)(2)(3)\uff1b// 6\nadd(1)(2, 3); // 6\nadd(1, 2)(3); // 6\nadd(1, 2, 3); // 6\nfunction add() {\n  let args = [].slice.call(arguments);\n\n  let fn = function(){\n   let fn_args = [].slice.call(arguments)\n   return add.apply(null,args.concat(fn_args))\n  }\n\n  fn.toString = function(){\n    return args.reduce((a,b)=>a+b)\n  }\n  return fn\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"9\u5b9e\u73b0-new",children:"9.\u5b9e\u73b0 new"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u521b\u5efa\u4e86\u4e00\u4e2a\u5168\u65b0\u7684\u5bf9\u8c61\u3002"}),"\n",(0,s.jsxs)(n.li,{children:["\u65b0\u5bf9\u8c61\u7684",(0,s.jsx)(n.code,{children:"__proto__"}),"\u5c5e\u6027\u6307\u5411\u6784\u9020\u51fd\u6570\u7684",(0,s.jsx)(n.code,{children:"prototype"}),"\u5c5e\u6027\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:["\u751f\u6210\u7684\u65b0\u5bf9\u8c61\u4f1a\u7ed1\u5b9a\u5230\u51fd\u6570\u8c03\u7528\u7684",(0,s.jsx)(n.code,{children:"this"}),"\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:["\u901a\u8fc7",(0,s.jsx)(n.code,{children:"new"}),"\u521b\u5efa\u7684\u6bcf\u4e2a\u5bf9\u8c61\u5c06\u6700\u7ec8\u88ab\u94fe\u63a5\u5230\u8fd9\u4e2a\u51fd\u6570\u7684",(0,s.jsx)(n.code,{children:"prototype"}),"\u5bf9\u8c61\u4e0a"]}),"\n",(0,s.jsxs)(n.li,{children:["\u5982\u679c\u51fd\u6570\u6ca1\u6709\u8fd4\u56de\u5bf9\u8c61\u7c7b\u578b",(0,s.jsx)(n.code,{children:"Object"}),"(\u5305\u542b",(0,s.jsx)(n.code,{children:"Functoin"}),", ",(0,s.jsx)(n.code,{children:"Array"}),", ",(0,s.jsx)(n.code,{children:"Date"}),", ",(0,s.jsx)(n.code,{children:"RegExg"}),", ",(0,s.jsx)(n.code,{children:"Error"}),")\uff0c\u90a3\u4e48",(0,s.jsx)(n.code,{children:"new"}),"\u8868\u8fbe\u5f0f\u4e2d\u7684\u51fd\u6570\u8c03\u7528\u4f1a\u81ea\u52a8\u8fd4\u56de\u8fd9\u4e2a\u65b0\u7684\u5bf9\u8c61"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'function myNew(Fn) {\n  if (typeof Fn !== "function")\n    throw new TypeError("This is not a constructor"); // Fn\u6821\u9a8c\n  var args = Array.from(arguments).slice(1); // \u53d6\u5165\u53c2\n  var obj = {}; // 1.\u521b\u5efa\u4e00\u4e2a\u7a7a\u7684\u7b80\u5355JavaScript\u5bf9\u8c61\uff08\u5373`  {}  `\uff09\n  obj.__proto__ = Fn.prototype; // 2.  \u4e3a\u6b65\u9aa41\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\u6dfb\u52a0\u5c5e\u6027`  __proto__  `\uff0c\u5c06\u8be5\u5c5e\u6027\u94fe\u63a5\u81f3\u6784\u9020\u51fd\u6570\u7684\u539f\u578b\u5bf9\u8c61\n  var res = Fn.call(obj, ...args); // 3.  \u5c06\u6b65\u9aa41\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\u4f5c\u4e3athis\u7684\u4e0a\u4e0b\u6587\u5e76\u4f20\u5165\u53c2\u6570\uff1b\n  return Object(res) === res ? res : obj; // 4.  \u5982\u679c\u8be5\u51fd\u6570\u6ca1\u6709\u8fd4\u56de\u5bf9\u8c61\uff0c\u5219\u8fd4\u56dethis\u3002\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"10\u6a21\u62df-objectcreate",children:"10.\u6a21\u62df Object.create"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["Object.create()",(0,s.jsx)(n.code,{children:"\u65b9\u6cd5\u521b\u5efa\u4e00\u4e2a\u65b0\u5bf9\u8c61\uff0c\u4f7f\u7528\u73b0\u6709\u7684\u5bf9\u8c61\u6765\u63d0\u4f9b\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\u7684 "}),(0,s.jsx)(n.strong,{children:"proto"})]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// \u6a21\u62df Object.create\nfunction create(proto) {\n  function F() {}\n  F.prototype = proto;\n  return new F();\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"11\u5b9e\u73b0-instanceof",children:"11.\u5b9e\u73b0 Instanceof"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"function myInstanceof(left, right) {\n  let proto = Object.getPrototypeOf(left),\n    prototype = right.prototype;\n\n  while (1) {\n    if (!proto) return false;\n    if (proto === prototype) return true;\n\n    proto = Object.getPrototypeOf(proto);\n  }\n}\nconsole.log(myInstanceof([1, 3, 4], Array));\nconsole.log(myInstanceof({}, Array));\nconsole.log(myInstanceof(new Date(), Object));\nconsole.log(myInstanceof(2, Array));\n"})}),"\n",(0,s.jsx)(n.h3,{id:"12\u624b\u5199-promise",children:"12.\u624b\u5199 promise"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://juejin.cn/post/6945319439772434469",children:"\u5b66\u4e60\u6587\u7ae0"})}),"\n",(0,s.jsx)(n.h4,{id:"\u94fe\u5f0f\u8c03\u7528\u539f\u7406",children:"\u94fe\u5f0f\u8c03\u7528\u539f\u7406"}),"\n",(0,s.jsx)(n.p,{children:"\u6211\u95e8\u5e38\u5e38\u7528\u5230 new Promise().then().then() ,\u8fd9\u5c31\u662f\u94fe\u5f0f\u8c03\u7528\uff0c\u7528\u6765\u89e3\u51b3\u56de\u8c03\u5730\u72f1"}),"\n",(0,s.jsxs)(n.p,{children:["1\u3001\u4e3a\u4e86\u8fbe\u6210\u94fe\u5f0f\uff0c",(0,s.jsx)(n.strong,{children:"\u6211\u4eec\u9ed8\u8ba4\u5728\u7b2c\u4e00\u4e2a then \u91cc\u8fd4\u56de\u4e00\u4e2a promise"}),"\u3002\u89c4\u5b9a\u4e86\u4e00\u79cd\u65b9\u6cd5\uff0c\u5c31\u662f",(0,s.jsx)(n.strong,{children:"\u5728 then \u91cc\u9762\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 promise"}),",\u79f0\u4e3a promise2\uff1a promise2 = new Promise((resolve, reject)=>",")"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"\u5c06\u8fd9\u4e2a promise2 \u8fd4\u56de\u7684\u503c\u4f20\u9012\u5230\u4e0b\u4e00\u4e2a then \u4e2d"})}),"\n",(0,s.jsxs)(n.li,{children:["\u5982\u679c\u8fd4\u56de\u4e00\u4e2a\u666e\u901a\u7684\u503c\uff0c\u5219\u5c06",(0,s.jsx)(n.strong,{children:"\u666e\u901a\u7684\u503c"}),"\u4f20\u9012\u7ed9\u4e0b\u4e00\u4e2a then \u4e2d"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"2\u3001\u5f53\u6211\u4eec\u5728\u7b2c\u4e00\u4e2a then \u4e2d return \u4e86\u4e00\u4e2a\u53c2\u6570\uff08\u53c2\u6570\u672a\u77e5\uff0c\u9700\u5224\u65ad\uff09\u3002\u8fd9\u4e2a return \u51fa\u6765\u7684\u65b0\u7684 promise \u5c31\u662f onFulfilled()\u6216 onRejected()\u7684\u503c"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u89c4\u5b9a onFulfilled()\u6216 onRejected()\u7684\u503c\uff0c\u5373\u7b2c\u4e00\u4e2a then \u8fd4\u56de\u7684\u503c\uff0c\u53eb\u505a x\uff0c\u5224\u65ad x \u7684\u51fd\u6570\u53eb\u505a resolvePromise"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"then(onFulfilled,onRejected) {\n    // \u58f0\u660e\u8fd4\u56de\u7684promise2\n    let promise2 = new Promise((resolve, reject)=>{\n      if (this.state === 'fulfilled') {\n        let x = onFulfilled(this.value);\n        resolvePromise(promise2, x, resolve, reject);\n      };\n      if (this.state === 'rejected') {\n        let x = onRejected(this.reason);\n        resolvePromise(promise2, x, resolve, reject);\n      };\n      if (this.state === 'pending') {\n        this.onResolvedCallbacks.push(()=>{\n          let x = onFulfilled(this.value);\n          resolvePromise(promise2, x, resolve, reject);\n        })\n        this.onRejectedCallbacks.push(()=>{\n          let x = onRejected(this.value);\n          resolvePromise(promise2, x, resolve, reject);\n        })\n      }\n    });\n    // \u8fd4\u56depromise\uff0c\u5b8c\u6210\u94fe\u5f0f\n    return promise2;\n  }\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u89c4\u5b9a\u4e86\u4e00\u6bb5\u4ee3\u7801\uff0c\u8ba9\u4e0d\u540c\u7684 promise \u4ee3\u7801\u4e92\u76f8\u5957\u7528\uff0c\u53eb\u505a resolvePromise\n\u5982\u679c x === promise2\uff0c\u5219\u662f\u4f1a\u9020\u6210\u5faa\u73af\u5f15\u7528\uff0c\u81ea\u5df1\u7b49\u5f85\u81ea\u5df1\u5b8c\u6210\uff0c\u5219\u62a5\u201c\u5faa\u73af\u5f15\u7528\u201d\u9519\u8bef"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"let p = new Promise((resolve) => {\n  resolve(0);\n});\nvar p2 = p.then((data) => {\n  // \u5faa\u73af\u5f15\u7528\uff0c\u81ea\u5df1\u7b49\u5f85\u81ea\u5df1\u5b8c\u6210\uff0c\u4e00\u8f88\u5b50\u5b8c\u4e0d\u6210\n  return p2;\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:"1\u3001\u5224\u65ad x"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"x \u4e0d\u80fd\u662f null"}),"\n",(0,s.jsx)(n.li,{children:"x \u662f\u666e\u901a\u503c \u76f4\u63a5 resolve(x)"}),"\n",(0,s.jsx)(n.li,{children:"x \u662f\u5bf9\u8c61\u6216\u8005\u51fd\u6570\uff08\u5305\u62ec promise\uff09\uff0c let then = x.then"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"2\u3001\u5f53 x \u662f\u5bf9\u8c61\u6216\u8005\u51fd\u6570\uff08\u9ed8\u8ba4 promise\uff09"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u58f0\u660e\u4e86 then"}),"\n",(0,s.jsx)(n.li,{children:"\u5982\u679c\u53d6 then \u62a5\u9519\uff0c\u5219\u8d70 reject()"}),"\n",(0,s.jsx)(n.li,{children:"\u5982\u679c then \u662f\u4e2a\u51fd\u6570\uff0c\u5219\u7528 call \u6267\u884c then\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f this\uff0c\u540e\u9762\u662f\u6210\u529f\u7684\u56de\u8c03\u548c\u5931\u8d25\u7684\u56de\u8c03"}),"\n",(0,s.jsx)(n.li,{children:"\u5982\u679c\u6210\u529f\u7684\u56de\u8c03\u8fd8\u662f pormise\uff0c\u5c31\u9012\u5f52\u7ee7\u7eed\u89e3\u6790"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u6210\u529f\u548c\u5931\u8d25\u53ea\u80fd\u8c03\u7528\u4e00\u4e2a \u6240\u4ee5",(0,s.jsx)(n.strong,{children:"\u8bbe\u5b9a\u4e00\u4e2a called \u6765\u9632\u6b62\u591a\u6b21\u8c03\u7528"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'function resolvePromise(promise2, x, resolve, reject) {\n  // \u5faa\u73af\u5f15\u7528\u62a5\u9519\n  if (x === promise2) {\n    // reject\u62a5\u9519\n    return reject(new TypeError("Chaining cycle detected for promise"));\n  }\n  // \u9632\u6b62\u591a\u6b21\u8c03\u7528\n  let called;\n  // x\u4e0d\u662fnull \u4e14x\u662f\u5bf9\u8c61\u6216\u8005\u51fd\u6570\n  if (x != null && (typeof x === "object" || typeof x === "function")) {\n    try {\n      // A+\u89c4\u5b9a\uff0c\u58f0\u660ethen = x\u7684then\u65b9\u6cd5\n      let then = x.then;\n      // \u5982\u679cthen\u662f\u51fd\u6570\uff0c\u5c31\u9ed8\u8ba4\u662fpromise\u4e86\n      if (typeof then === "function") {\n        // \u5c31\u8ba9then\u6267\u884c \u7b2c\u4e00\u4e2a\u53c2\u6570\u662fthis   \u540e\u9762\u662f\u6210\u529f\u7684\u56de\u8c03 \u548c \u5931\u8d25\u7684\u56de\u8c03\n        then.call(\n          x,\n          (y) => {\n            // \u6210\u529f\u548c\u5931\u8d25\u53ea\u80fd\u8c03\u7528\u4e00\u4e2a\n            if (called) return;\n            called = true;\n            // resolve\u7684\u7ed3\u679c\u4f9d\u65e7\u662fpromise \u90a3\u5c31\u7ee7\u7eed\u89e3\u6790\n            resolvePromise(promise2, y, resolve, reject);\n          },\n          (err) => {\n            // \u6210\u529f\u548c\u5931\u8d25\u53ea\u80fd\u8c03\u7528\u4e00\u4e2a\n            if (called) return;\n            called = true;\n            reject(err); // \u5931\u8d25\u4e86\u5c31\u5931\u8d25\u4e86\n          }\n        );\n      } else {\n        resolve(x); // \u76f4\u63a5\u6210\u529f\u5373\u53ef\n      }\n    } catch (e) {\n      // \u4e5f\u5c5e\u4e8e\u5931\u8d25\n      if (called) return;\n      called = true;\n      // \u53d6then\u51fa\u9519\u4e86\u90a3\u5c31\u4e0d\u8981\u5728\u7ee7\u7eed\u6267\u884c\u4e86\n      reject(e);\n    }\n  } else {\n    resolve(x);\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u4e0d\u5b8c\u5168\u5b9e\u73b0\u6ca1\u6709\u5b8c\u5168\u5b9e\u73b0\u94fe\u5f0f\u8c03\u7528",children:"\u4e0d\u5b8c\u5168\u5b9e\u73b0\uff08\u6ca1\u6709\u5b8c\u5168\u5b9e\u73b0\u94fe\u5f0f\u8c03\u7528\uff09"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'/*  Promise\u6709\u4e09\u4e2a\u72b6\u6001,\u5305\u62ecPending,resolved,rejected */\n//\u72b6\u6001\u5b9a\u4e49\nconst PENDING = "pending";\nconst RESOLVED = "resolved";\nconst REJECTED = "rejected";\n\nfunction MyPromise() {\n  //\u4fdd\u5b58\u521d\u59cb\u5316\u72b6\u6001\n  var self = this;\n  //\u521d\u59cb\u5316\u72b6\u6001\n  this.state = PENDING;\n  //\u7528\u4e8e\u4fdd\u5b58resolve\u6216\u8005rejected\u4f20\u5165\u7684\u503c\n  this.value = null;\n  //\u7528\u4e8e\u4fdd\u5b58resolve\u7684\u56de\u8c03\u51fd\u6570\n  this.resolvedCallbacks = [];\n  //\u7528\u4e8e\u4fdd\u5b58reject\u7684\u56de\u8c03\u51fd\u6570\n  this.rejectedCallbacks = [];\n\n  //\u72b6\u6001\u8f6c\u53d8\u4e3aresolved\u65b9\u6cd5\n  function resolved(value) {\n    if (value instanceof MyPromise) {\n      return value.then(resolved, rejected);\n    }\n\n    //\u4fdd\u8bc1\u4ee3\u7801\u7684\u6267\u884c\u987a\u5e8f\u4e3a\u672c\u8f6e\u4e8b\u4ef6\u5faa\u73af\u7684\u672b\u5c3e\n    setTimeout(() => {\n      //   \u53ea\u6709\u72b6\u6001pending\u624d\u6539\u53d8\n      if (self.state === PENDING) {\n        //\u6539\u53d8\u72b6\u6001\n        self.status = RESOLVED;\n        //\u8bbe\u7f6e\u4f20\u5165\u7684\u503c\n        self.value = value;\n        //\u6267\u884c\u56de\u8c03\u51fd\u6570\n        self.resolvedCallbacks.forEach((callback) => {\n          callback(back);\n        });\n      }\n    }, 0);\n  }\n\n  //\u72b6\u6001\u8f6c\u53d8\u4e3arejected\u65b9\u6cd5\n  function rejected(value) {\n    //\u4fdd\u8bc1\u4ee3\u7801\u7684\u6267\u884c\u987a\u5e8f\u4e3a\u672c\u8f6e\u4e8b\u4ef6\u5faa\u73af\u7684\u672b\u5c3e\n    setTimeout(() => {\n      //   \u53ea\u6709\u72b6\u6001pending\u624d\u6539\u53d8\n      if (self.state === PENDING) {\n        //\u6539\u53d8\u72b6\u6001\n        self.status = REJECTED;\n        //\u8bbe\u7f6e\u4f20\u5165\u7684\u503c\n        self.value = value;\n        //\u6267\u884c\u56de\u8c03\u51fd\u6570\n        self.rejectedCallbacks.forEach((callback) => {\n          callback(back);\n        });\n      }\n    }, 0);\n  }\n\n  //\u5c06\u4e24\u4e2a\u65b9\u6cd5\u4f20\u5165\u51fd\u6570\u6267\u884c\n  try {\n    fn(resolve, reject);\n  } catch (e) {\n    //\u9047\u5230\u9519\u8bef\u65f6,\u6355\u83b7\u9519\u8bef,\u6267\u884creject\u51fd\u6570\n    reject(e);\n  }\n\n  MyPromise.prototype.then = function (onResolved, onRejected) {\n    //\u9996\u5148\u5224\u65ad\u4e24\u4e2a\u53c2\u6570\u662f\u5426\u4e3a\u51fd\u6570\u7c7b\u578b,\u56e0\u4e3a\u8fd9\u4e24\u4e2a\u53c2\u6570\u662f\u53ef\u9009\u53c2\u6570\n    onResolved =\n      typeof onResolved === "function"\n        ? onResolved\n        : function (value) {\n            return value;\n          };\n    onRejected =\n      typeof onRejected === "function"\n        ? onRejected\n        : function (error) {\n            throw error;\n          };\n\n    //\u5982\u679c\u662f\u7b49\u5f85\u72b6\u6001,\u5219\u5c06\u51fd\u6570\u52a0\u5165\u5bf9\u5e94\u5217\u8868\u4e2d\n    if (this.status === PENDING) {\n      this.resolvedCallbacks.push(onResolved);\n      this.rejectedCallbacks.push(onRejected);\n    }\n    if (this.state === RESOLVED) {\n      onResolved(this.value);\n    }\n    if (this.state === REJECTED) {\n      onRejected(this.value);\n    }\n  };\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u5b8c\u5168\u89c4\u8303\u5b9e\u73b0",children:"\u5b8c\u5168\u89c4\u8303\u5b9e\u73b0"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'class Promise {\n  constructor(executor) {\n    this.state = "pending";\n    this.value = undefined;\n    this.reason = undefined;\n    this.onResolvedCallbacks = [];\n    this.onRejectedCallbacks = [];\n    let resolve = (value) => {\n      if (this.state === "pending") {\n        this.state = "fulfilled";\n        this.value = value;\n        this.onResolvedCallbacks.forEach((fn) => fn());\n      }\n    };\n    let reject = (reason) => {\n      if (this.state === "pending") {\n        this.state = "rejected";\n        this.reason = reason;\n        this.onRejectedCallbacks.forEach((fn) => fn());\n      }\n    };\n    try {\n      executor(resolve, reject);\n    } catch (err) {\n      reject(err);\n    }\n  }\n  then(onFulfilled, onRejected) {\n    // onFulfilled\u5982\u679c\u4e0d\u662f\u51fd\u6570\uff0c\u5c31\u5ffd\u7565onFulfilled\uff0c\u76f4\u63a5\u8fd4\u56devalue\n    onFulfilled =\n      typeof onFulfilled === "function" ? onFulfilled : (value) => value;\n    // onRejected\u5982\u679c\u4e0d\u662f\u51fd\u6570\uff0c\u5c31\u5ffd\u7565onRejected\uff0c\u76f4\u63a5\u6254\u51fa\u9519\u8bef\n    onRejected =\n      typeof onRejected === "function"\n        ? onRejected\n        : (err) => {\n            throw err;\n          };\n    let promise2 = new Promise((resolve, reject) => {\n      if (this.state === "fulfilled") {\n        // \u5f02\u6b65\n        setTimeout(() => {\n          try {\n            let x = onFulfilled(this.value);\n            resolvePromise(promise2, x, resolve, reject);\n          } catch (e) {\n            reject(e);\n          }\n        }, 0);\n      }\n      if (this.state === "rejected") {\n        // \u5f02\u6b65\n        setTimeout(() => {\n          // \u5982\u679c\u62a5\u9519\n          try {\n            let x = onRejected(this.reason);\n            resolvePromise(promise2, x, resolve, reject);\n          } catch (e) {\n            reject(e);\n          }\n        }, 0);\n      }\n      if (this.state === "pending") {\n        this.onResolvedCallbacks.push(() => {\n          // \u5f02\u6b65\n          setTimeout(() => {\n            try {\n              let x = onFulfilled(this.value);\n              resolvePromise(promise2, x, resolve, reject);\n            } catch (e) {\n              reject(e);\n            }\n          }, 0);\n        });\n        this.onRejectedCallbacks.push(() => {\n          // \u5f02\u6b65\n          setTimeout(() => {\n            try {\n              let x = onRejected(this.reason);\n              resolvePromise(promise2, x, resolve, reject);\n            } catch (e) {\n              reject(e);\n            }\n          }, 0);\n        });\n      }\n    });\n    // \u8fd4\u56depromise\uff0c\u5b8c\u6210\u94fe\u5f0f\n    return promise2;\n  }\n  catch(fn) {\n    return this.then(null, fn);\n  }\n}\nfunction resolvePromise(promise2, x, resolve, reject) {\n  if (x === promise2) {\n    return reject(new TypeError("Chaining cycle detected for promise"));\n  }\n  let called;\n  if (x != null && (typeof x === "object" || typeof x === "function")) {\n    try {\n      let then = x.then;\n      if (typeof then === "function") {\n        then.call(\n          x,\n          (y) => {\n            if (called) return;\n            called = true;\n            resolvePromise(promise2, y, resolve, reject);\n          },\n          (err) => {\n            if (called) return;\n            called = true;\n            reject(err);\n          }\n        );\n      } else {\n        resolve(x);\n      }\n    } catch (e) {\n      if (called) return;\n      called = true;\n      reject(e);\n    }\n  } else {\n    resolve(x);\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u5168\u90e8\u65b9\u6cd5\u5b9e\u73b0",children:"\u5168\u90e8\u65b9\u6cd5\u5b9e\u73b0"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'class Promise {\n  constructor(executor) {\n    this.state = "pending";\n    this.value = undefined;\n    this.reason = undefined;\n    this.onResolvedCallbacks = [];\n    this.onRejectedCallbacks = [];\n    let resolve = (value) => {\n      if (this.state === "pending") {\n        this.state = "fulfilled";\n        this.value = value;\n        this.onResolvedCallbacks.forEach((fn) => fn());\n      }\n    };\n    let reject = (reason) => {\n      if (this.state === "pending") {\n        this.state = "rejected";\n        this.reason = reason;\n        this.onRejectedCallbacks.forEach((fn) => fn());\n      }\n    };\n    try {\n      executor(resolve, reject);\n    } catch (err) {\n      reject(err);\n    }\n  }\n  then(onFulfilled, onRejected) {\n    onFulfilled =\n      typeof onFulfilled === "function" ? onFulfilled : (value) => value;\n    onRejected =\n      typeof onRejected === "function"\n        ? onRejected\n        : (err) => {\n            throw err;\n          };\n    let promise2 = new Promise((resolve, reject) => {\n      if (this.state === "fulfilled") {\n        setTimeout(() => {\n          try {\n            let x = onFulfilled(this.value);\n            resolvePromise(promise2, x, resolve, reject);\n          } catch (e) {\n            reject(e);\n          }\n        }, 0);\n      }\n      if (this.state === "rejected") {\n        setTimeout(() => {\n          try {\n            let x = onRejected(this.reason);\n            resolvePromise(promise2, x, resolve, reject);\n          } catch (e) {\n            reject(e);\n          }\n        }, 0);\n      }\n      if (this.state === "pending") {\n        this.onResolvedCallbacks.push(() => {\n          setTimeout(() => {\n            try {\n              let x = onFulfilled(this.value);\n              resolvePromise(promise2, x, resolve, reject);\n            } catch (e) {\n              reject(e);\n            }\n          }, 0);\n        });\n        this.onRejectedCallbacks.push(() => {\n          setTimeout(() => {\n            try {\n              let x = onRejected(this.reason);\n              resolvePromise(promise2, x, resolve, reject);\n            } catch (e) {\n              reject(e);\n            }\n          }, 0);\n        });\n      }\n    });\n    return promise2;\n  }\n  catch(fn) {\n    return this.then(null, fn);\n  }\n}\nfunction resolvePromise(promise2, x, resolve, reject) {\n  if (x === promise2) {\n    return reject(new TypeError("Chaining cycle detected for promise"));\n  }\n  let called;\n  if (x != null && (typeof x === "object" || typeof x === "function")) {\n    try {\n      let then = x.then;\n      if (typeof then === "function") {\n        then.call(\n          x,\n          (y) => {\n            if (called) return;\n            called = true;\n            resolvePromise(promise2, y, resolve, reject);\n          },\n          (err) => {\n            if (called) return;\n            called = true;\n            reject(err);\n          }\n        );\n      } else {\n        resolve(x);\n      }\n    } catch (e) {\n      if (called) return;\n      called = true;\n      reject(e);\n    }\n  } else {\n    resolve(x);\n  }\n}\n//resolve\u65b9\u6cd5\nPromise.resolve = function (val) {\n  return new Promise((resolve, reject) => {\n    resolve(val);\n  });\n};\n//reject\u65b9\u6cd5\nPromise.reject = function (val) {\n  return new Promise((resolve, reject) => {\n    reject(val);\n  });\n};\n//race\u65b9\u6cd5\nPromise.race = function (promises) {\n  return new Promise((resolve, reject) => {\n    for (let i = 0; i < promises.length; i++) {\n      promises[i].then(resolve, reject);\n    }\n  });\n};\n//all\u65b9\u6cd5(\u83b7\u53d6\u6240\u6709\u7684promise\uff0c\u90fd\u6267\u884cthen\uff0c\u628a\u7ed3\u679c\u653e\u5230\u6570\u7ec4\uff0c\u4e00\u8d77\u8fd4\u56de)\nPromise.all = function (promises) {\n  let arr = [];\n  let i = 0;\n  function processData(index, data) {\n    arr[index] = data;\n    i++;\n    if (i == promises.length) {\n      resolve(arr);\n    }\n  }\n  return new Promise((resolve, reject) => {\n    for (let i = 0; i < promises.length; i++) {\n      promises[i].then((data) => {\n        processData(i, data);\n      }, reject);\n    }\n  });\n};\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u901a\u8fc7-a\u6d4b\u8bd5",children:"\u901a\u8fc7 A+\u6d4b\u8bd5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'// \u5148\u5b9a\u4e49\u4e09\u4e2a\u5e38\u91cf\u8868\u793a\u72b6\u6001\nconst PENDING = "pending";\nconst FULFILLED = "fulfilled";\nconst REJECTED = "rejected";\n\n// \u65b0\u5efa MyPromise \u7c7b\nclass MyPromise {\n  constructor(executor) {\n    // executor \u662f\u4e00\u4e2a\u6267\u884c\u5668\uff0c\u8fdb\u5165\u4f1a\u7acb\u5373\u6267\u884c\n    // \u5e76\u4f20\u5165resolve\u548creject\u65b9\u6cd5\n    try {\n      executor(this.resolve, this.reject);\n    } catch (error) {\n      this.reject(error);\n    }\n  }\n\n  // \u50a8\u5b58\u72b6\u6001\u7684\u53d8\u91cf\uff0c\u521d\u59cb\u503c\u662f pending\n  status = PENDING;\n\n  // resolve\u548creject\u4e3a\u4ec0\u4e48\u8981\u7528\u7bad\u5934\u51fd\u6570\uff1f\n  // \u5982\u679c\u76f4\u63a5\u8c03\u7528\u7684\u8bdd\uff0c\u666e\u901a\u51fd\u6570this\u6307\u5411\u7684\u662fwindow\u6216\u8005undefined\n  // \u7528\u7bad\u5934\u51fd\u6570\u5c31\u53ef\u4ee5\u8ba9this\u6307\u5411\u5f53\u524d\u5b9e\u4f8b\u5bf9\u8c61\n  // \u6210\u529f\u4e4b\u540e\u7684\u503c\n  value = null;\n  // \u5931\u8d25\u4e4b\u540e\u7684\u539f\u56e0\n  reason = null;\n\n  // \u5b58\u50a8\u6210\u529f\u56de\u8c03\u51fd\u6570\n  onFulfilledCallbacks = [];\n  // \u5b58\u50a8\u5931\u8d25\u56de\u8c03\u51fd\u6570\n  onRejectedCallbacks = [];\n\n  // \u66f4\u6539\u6210\u529f\u540e\u7684\u72b6\u6001\n  resolve = (value) => {\n    // \u53ea\u6709\u72b6\u6001\u662f\u7b49\u5f85\uff0c\u624d\u6267\u884c\u72b6\u6001\u4fee\u6539\n    if (this.status === PENDING) {\n      // \u72b6\u6001\u4fee\u6539\u4e3a\u6210\u529f\n      this.status = FULFILLED;\n      // \u4fdd\u5b58\u6210\u529f\u4e4b\u540e\u7684\u503c\n      this.value = value;\n      // resolve\u91cc\u9762\u5c06\u6240\u6709\u6210\u529f\u7684\u56de\u8c03\u62ff\u51fa\u6765\u6267\u884c\n      while (this.onFulfilledCallbacks.length) {\n        // Array.shift() \u53d6\u51fa\u6570\u7ec4\u7b2c\u4e00\u4e2a\u5143\u7d20\uff0c\u7136\u540e\uff08\uff09\u8c03\u7528\uff0cshift\u4e0d\u662f\u7eaf\u51fd\u6570\uff0c\u53d6\u51fa\u540e\uff0c\u6570\u7ec4\u5c06\u5931\u53bb\u8be5\u5143\u7d20\uff0c\u76f4\u5230\u6570\u7ec4\u4e3a\u7a7a\n        this.onFulfilledCallbacks.shift()(value);\n      }\n    }\n  };\n\n  // \u66f4\u6539\u5931\u8d25\u540e\u7684\u72b6\u6001\n  reject = (reason) => {\n    // \u53ea\u6709\u72b6\u6001\u662f\u7b49\u5f85\uff0c\u624d\u6267\u884c\u72b6\u6001\u4fee\u6539\n    if (this.status === PENDING) {\n      // \u72b6\u6001\u6210\u529f\u4e3a\u5931\u8d25\n      this.status = REJECTED;\n      // \u4fdd\u5b58\u5931\u8d25\u540e\u7684\u539f\u56e0\n      this.reason = reason;\n      // resolve\u91cc\u9762\u5c06\u6240\u6709\u5931\u8d25\u7684\u56de\u8c03\u62ff\u51fa\u6765\u6267\u884c\n      while (this.onRejectedCallbacks.length) {\n        this.onRejectedCallbacks.shift()(reason);\n      }\n    }\n  };\n\n  then(onFulfilled, onRejected) {\n    const realOnFulfilled =\n      typeof onFulfilled === "function" ? onFulfilled : (value) => value;\n    const realOnRejected =\n      typeof onRejected === "function"\n        ? onRejected\n        : (reason) => {\n            throw reason;\n          };\n\n    // \u4e3a\u4e86\u94fe\u5f0f\u8c03\u7528\u8fd9\u91cc\u76f4\u63a5\u521b\u5efa\u4e00\u4e2a MyPromise\uff0c\u5e76\u5728\u540e\u9762 return \u51fa\u53bb\n    const promise2 = new MyPromise((resolve, reject) => {\n      const fulfilledMicrotask = () => {\n        // \u521b\u5efa\u4e00\u4e2a\u5fae\u4efb\u52a1\u7b49\u5f85 promise2 \u5b8c\u6210\u521d\u59cb\u5316\n        queueMicrotask(() => {\n          try {\n            // \u83b7\u53d6\u6210\u529f\u56de\u8c03\u51fd\u6570\u7684\u6267\u884c\u7ed3\u679c\n            const x = realOnFulfilled(this.value);\n            // \u4f20\u5165 resolvePromise \u96c6\u4e2d\u5904\u7406\n            resolvePromise(promise2, x, resolve, reject);\n          } catch (error) {\n            reject(error);\n          }\n        });\n      };\n\n      const rejectedMicrotask = () => {\n        // \u521b\u5efa\u4e00\u4e2a\u5fae\u4efb\u52a1\u7b49\u5f85 promise2 \u5b8c\u6210\u521d\u59cb\u5316\n        queueMicrotask(() => {\n          try {\n            // \u8c03\u7528\u5931\u8d25\u56de\u8c03\uff0c\u5e76\u4e14\u628a\u539f\u56e0\u8fd4\u56de\n            const x = realOnRejected(this.reason);\n            // \u4f20\u5165 resolvePromise \u96c6\u4e2d\u5904\u7406\n            resolvePromise(promise2, x, resolve, reject);\n          } catch (error) {\n            reject(error);\n          }\n        });\n      };\n      // \u5224\u65ad\u72b6\u6001\n      if (this.status === FULFILLED) {\n        fulfilledMicrotask();\n      } else if (this.status === REJECTED) {\n        rejectedMicrotask();\n      } else if (this.status === PENDING) {\n        // \u7b49\u5f85\n        // \u56e0\u4e3a\u4e0d\u77e5\u9053\u540e\u9762\u72b6\u6001\u7684\u53d8\u5316\u60c5\u51b5\uff0c\u6240\u4ee5\u5c06\u6210\u529f\u56de\u8c03\u548c\u5931\u8d25\u56de\u8c03\u5b58\u50a8\u8d77\u6765\n        // \u7b49\u5230\u6267\u884c\u6210\u529f\u5931\u8d25\u51fd\u6570\u7684\u65f6\u5019\u518d\u4f20\u9012\n        this.onFulfilledCallbacks.push(fulfilledMicrotask);\n        this.onRejectedCallbacks.push(rejectedMicrotask);\n      }\n    });\n\n    return promise2;\n  }\n\n  catch(onRejected) {\n    // \u53ea\u9700\u8981\u8fdb\u884c\u9519\u8bef\u5904\u7406\n    this.then(undefined, onRejected);\n  }\n\n  finally(fn) {\n    return this.then(\n      (value) => {\n        return MyPromise.resolve(fn()).then(() => {\n          return value;\n        });\n      },\n      (error) => {\n        return MyPromise.resolve(fn()).then(() => {\n          throw error;\n        });\n      }\n    );\n  }\n\n  // resolve \u9759\u6001\u65b9\u6cd5\n  static resolve(parameter) {\n    // \u5982\u679c\u4f20\u5165 MyPromise \u5c31\u76f4\u63a5\u8fd4\u56de\n    if (parameter instanceof MyPromise) {\n      return parameter;\n    }\n\n    // \u8f6c\u6210\u5e38\u89c4\u65b9\u5f0f\n    return new MyPromise((resolve) => {\n      resolve(parameter);\n    });\n  }\n\n  // reject \u9759\u6001\u65b9\u6cd5\n  static reject(reason) {\n    return new MyPromise((resolve, reject) => {\n      reject(reason);\n    });\n  }\n\n  static all(promiseList) {\n    return new MyPromise((resolve, reject) => {\n      const result = [];\n      const length = promiseList.length;\n      let count = 0;\n\n      if (length === 0) {\n        return resolve(result);\n      }\n\n      promiseList.forEach((promise, index) => {\n        MyPromise.resolve(promise).then(\n          (value) => {\n            count++;\n            result[index] = value;\n            if (count === length) {\n              resolve(result);\n            }\n          },\n          (reason) => {\n            reject(reason);\n          }\n        );\n      });\n    });\n  }\n\n  static allSettled = (promiseList) => {\n    return new MyPromise((resolve) => {\n      const length = promiseList.length;\n      const result = [];\n      let count = 0;\n\n      if (length === 0) {\n        return resolve(result);\n      } else {\n        for (let i = 0; i < length; i++) {\n          const currentPromise = MyPromise.resolve(promiseList[i]);\n          currentPromise.then(\n            (value) => {\n              count++;\n              result[i] = {\n                status: "fulfilled",\n                value: value,\n              };\n              if (count === length) {\n                return resolve(result);\n              }\n            },\n            (reason) => {\n              count++;\n              result[i] = {\n                status: "rejected",\n                reason: reason,\n              };\n              if (count === length) {\n                return resolve(result);\n              }\n            }\n          );\n        }\n      }\n    });\n  };\n\n  static race(promiseList) {\n    return new MyPromise((resolve, reject) => {\n      const length = promiseList.length;\n\n      if (length === 0) {\n        return resolve();\n      } else {\n        for (let i = 0; i < length; i++) {\n          MyPromise.resolve(promiseList[i]).then(\n            (value) => {\n              return resolve(value);\n            },\n            (reason) => {\n              return reject(reason);\n            }\n          );\n        }\n      }\n    });\n  }\n}\n\nfunction resolvePromise(promise, x, resolve, reject) {\n  // \u5982\u679c promise \u548c x \u6307\u5411\u540c\u4e00\u5bf9\u8c61\uff0c\u4ee5 TypeError \u4e3a\u636e\u56e0\u62d2\u7edd\u6267\u884c promise\n  // \u8fd9\u662f\u4e3a\u4e86\u9632\u6b62\u6b7b\u5faa\u73af\n  if (promise === x) {\n    return reject(\n      new TypeError("The promise and the return value are the same")\n    );\n  }\n\n  if (typeof x === "object" || typeof x === "function") {\n    // \u8fd9\u4e2a\u5751\u662f\u8dd1\u6d4b\u8bd5\u7684\u65f6\u5019\u53d1\u73b0\u7684\uff0c\u5982\u679cx\u662fnull\uff0c\u5e94\u8be5\u76f4\u63a5resolve\n    if (x === null) {\n      return resolve(x);\n    }\n\n    let then;\n    try {\n      // \u628a x.then \u8d4b\u503c\u7ed9 then\n      then = x.then;\n    } catch (error) {\n      // \u5982\u679c\u53d6 x.then \u7684\u503c\u65f6\u629b\u51fa\u9519\u8bef e \uff0c\u5219\u4ee5 e \u4e3a\u636e\u56e0\u62d2\u7edd promise\n      return reject(error);\n    }\n\n    // \u5982\u679c then \u662f\u51fd\u6570\n    if (typeof then === "function") {\n      let called = false;\n      // \u5c06 x \u4f5c\u4e3a\u51fd\u6570\u7684\u4f5c\u7528\u57df this \u8c03\u7528\u4e4b\n      // \u4f20\u9012\u4e24\u4e2a\u56de\u8c03\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u53eb\u505a resolvePromise \uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53eb\u505a rejectPromise\n      // \u540d\u5b57\u91cd\u540d\u4e86\uff0c\u6211\u76f4\u63a5\u7528\u533f\u540d\u51fd\u6570\u4e86\n      try {\n        then.call(\n          x,\n          // \u5982\u679c resolvePromise \u4ee5\u503c y \u4e3a\u53c2\u6570\u88ab\u8c03\u7528\uff0c\u5219\u8fd0\u884c [[Resolve]](promise, y)\n          (y) => {\n            // \u5982\u679c resolvePromise \u548c rejectPromise \u5747\u88ab\u8c03\u7528\uff0c\n            // \u6216\u8005\u88ab\u540c\u4e00\u53c2\u6570\u8c03\u7528\u4e86\u591a\u6b21\uff0c\u5219\u4f18\u5148\u91c7\u7528\u9996\u6b21\u8c03\u7528\u5e76\u5ffd\u7565\u5269\u4e0b\u7684\u8c03\u7528\n            // \u5b9e\u73b0\u8fd9\u6761\u9700\u8981\u524d\u9762\u52a0\u4e00\u4e2a\u53d8\u91cfcalled\n            if (called) return;\n            called = true;\n            resolvePromise(promise, y, resolve, reject);\n          },\n          // \u5982\u679c rejectPromise \u4ee5\u636e\u56e0 r \u4e3a\u53c2\u6570\u88ab\u8c03\u7528\uff0c\u5219\u4ee5\u636e\u56e0 r \u62d2\u7edd promise\n          (r) => {\n            if (called) return;\n            called = true;\n            reject(r);\n          }\n        );\n      } catch (error) {\n        // \u5982\u679c\u8c03\u7528 then \u65b9\u6cd5\u629b\u51fa\u4e86\u5f02\u5e38 e\uff1a\n        // \u5982\u679c resolvePromise \u6216 rejectPromise \u5df2\u7ecf\u88ab\u8c03\u7528\uff0c\u5219\u5ffd\u7565\u4e4b\n        if (called) return;\n\n        // \u5426\u5219\u4ee5 e \u4e3a\u636e\u56e0\u62d2\u7edd promise\n        reject(error);\n      }\n    } else {\n      // \u5982\u679c then \u4e0d\u662f\u51fd\u6570\uff0c\u4ee5 x \u4e3a\u53c2\u6570\u6267\u884c promise\n      resolve(x);\n    }\n  } else {\n    // \u5982\u679c x \u4e0d\u4e3a\u5bf9\u8c61\u6216\u8005\u51fd\u6570\uff0c\u4ee5 x \u4e3a\u53c2\u6570\u6267\u884c promise\n    resolve(x);\n  }\n}\n\nMyPromise.deferred = function () {\n  var result = {};\n  result.promise = new MyPromise(function (resolve, reject) {\n    result.resolve = resolve;\n    result.reject = reject;\n  });\n\n  return result;\n};\nmodule.exports = MyPromise;\n'})}),"\n",(0,s.jsx)(n.h3,{id:"13\u624b\u5199\u6570\u7ec4\u65b9\u6cd5",children:"13.\u624b\u5199\u6570\u7ec4\u65b9\u6cd5"}),"\n",(0,s.jsx)(n.h4,{id:"\u624b\u5199-reduce",children:"\u624b\u5199 reduce"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"Array.prototype.myReduce = function (cb, initialValue) {\n  const array = this;\n  let pre = initialValue || array[0];\n  const startIndex = initialValue ? 0 : 1;\n  for (let i = startIndex; i < array.length; i++) {\n    const cur = array[i];\n    pre = cb(pre, cur, i, array);\n  }\n  return pre;\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u624b\u5199-foreach",children:"\u624b\u5199 forEach"}),"\n",(0,s.jsx)(n.p,{children:"forEach() \u65b9\u6cd5\u7528\u4e8e\u8c03\u7528\u6570\u7ec4\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u5e76\u5c06\u5143\u7d20\u4f20\u9012\u7ed9\u56de\u8c03\u51fd\u6570\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'Array.prototype.myForEach = function (fn) {\n  let context = arguments[1] || window;\n\n  if (typeof fn === "function") {\n    for (let i = 0; i < this.length; i++) {\n      fn.call(context, this[i], i, this);\n    }\n  } else {\n    throw new Error("parameter1 is not a function");\n  }\n};\nlet arr = [1, 3, 5, 7];\narr.myforEach((item, i, arr) => {\n  console.log("item:" + item + "i:" + i);\n});\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u624b\u5199-map",children:"\u624b\u5199 map"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'Array.prototype.myMap = function (callback, thisArg) {\n  let length = this.length;\n  let res = [];\n  if (!Array.isArray(this)) throw new TypeError("this is not an array");\n  if (typeof callback !== "function")\n    throw new TypeError(callback + "is not a function");\n  if (length === 0) {\n    return res;\n  }\n  for (let i = 0; i < length; i++) {\n    res[i] = callback.call(thisArg, this[i], i, this);\n  }\n  return res;\n};\nlet arr = [1, 3, 5, 7];\nlet newArr = arr.mymap((item) => {\n  return item * 3;\n});\nconsole.log(newArr);\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u624b\u5199-flat",children:"\u624b\u5199 flat"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"Array.prototype.myflat = function (num = 1) {\n  if (!Number(num) || Number(num) < 0) {\n    return this;\n  }\n  var arr = [];\n  this.forEach((item) => {\n    if (Array.isArray(item)) {\n      arr = arr.concat(item.flat(--num));\n    } else {\n      arr.push(item);\n    }\n  });\n  return arr;\n};\nconst arr = [1, [2, [3, \"a\", [4]]]];\n\nconsole.log(arr.myflat(\"dsdsadf\")); // [1, [2, [3, 'a', [4]]]]\nconsole.log(arr.myflat(-32)); // [1, [2, [3, 'a', [4]]]]\nconsole.log(arr.myflat(0)); // [1, [2, [3, 'a', [4]]]]\nconsole.log(arr.myflat(\"1\")); // [1, 2, [3, 'a', [4]]]\nconsole.log(arr.myflat(\"2\")); // [1, 2, 3, 'a', [4]]\nconsole.log(arr.myflat(3)); // [1, 2, 3, 'a', 4]\nconsole.log(arr.myflat(Infinity)); // [1, 2, 3, 'a', 4]\nconsole.log(arr.myflat(\"Infinity\")); // [1, 2, 3, 'a', 4]\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u5b9e\u73b0-filter-\u65b9\u6cd5",children:"\u5b9e\u73b0 filter \u65b9\u6cd5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"Array.prototype.myFilter = function (callback, context = window) {\n  let len = this.length;\n  (newArr = []), (i = 0);\n\n  for (; i < len; i++) {\n    if (callback.apply(context, [this[i], i, this])) {\n      newArr.push(this[i]);\n    }\n  }\n  return newArr;\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u5b9e\u73b0-some-\u65b9\u6cd5",children:"\u5b9e\u73b0 some \u65b9\u6cd5"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u8bed\u6cd5"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"array.some(function(currentValue,index,arr),thisValue)\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u53c2\u6570\u8bf4\u660e"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-vb",children:'currentValue: \u5fc5\u987b\u3002\u5f53\u524d\u5143\u7d20\u7684\u503c\nindex: \u53ef\u9009\u3002\u5f53\u524d\u5143\u7d20\u7684\u7d22\u5f15\u503c\narr: \u53ef\u9009\u3002\u5f53\u524d\u5143\u7d20\u5c5e\u4e8e\u7684\u6570\u7ec4\u5bf9\u8c61\n\nthisValue: \u53ef\u9009\u3002\u5bf9\u8c61\u4f5c\u4e3a\u8be5\u6267\u884c\u56de\u8c03\u65f6\u4f7f\u7528\uff0c\u4f20\u9012\u7ed9\u51fd\u6570\uff0c\u7528\u4f5c "this" \u7684\u503c\u3002\\\n\u5982\u679c\u7701\u7565\u4e86 thisValue \uff0c"this" \u7684\u503c\u4e3a undefined\n\n\u8fd4\u56de\u503c\uff1a \u5e03\u5c14\u503c\u3002\u5982\u679c\u6570\u7ec4\u4e2d\u6709\u5143\u7d20\u6ee1\u8db3\u6761\u4ef6\u8fd4\u56de true\uff0c\u5426\u5219\u8fd4\u56de false\u3002\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'Array.prototype.mySome = function (fn, thisValue) {\n  if (typeof fn !== "function") {\n    throw new Error(`${fn} \u4e0d\u662f\u4e00\u4e2a\u51fd\u6570`);\n  }\n  if ([null, undefined].includes(this)) {\n    throw new Error(`this \u662fnull \u6216\u8005 undefined`);\n  }\n  const arr = Object(this);\n  let flag = false;\n  for (let i = 0; i < arr.length; i++) {\n    const res = fn.call(thisValue, arr[i], i, arr); // call\u65b9\u6cd5\u5982\u679c\u4f20null\u6216\u8005undefined\u4e3a\u53c2\u6570\uff0c\u4f1a\u5c06this\u6307\u5411window\n    if (res) {\n      return true;\n    }\n  }\n  return flag;\n};\nconst arr = [13];\nconsole.log(arr.myEvery((item) => item > 15, [12, 15, 45]));\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u5b9e\u73b0-every-\u65b9\u6cd5",children:"\u5b9e\u73b0 every \u65b9\u6cd5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'Array.prototype.myEvery = function (fn, thisValue) {\n  if (typeof fn !== "function") {\n    throw new Error(`${fn} \u4e0d\u662f\u4e00\u4e2a\u51fd\u6570`);\n  }\n  if ([null, undefined].includes(this)) {\n    throw new Error(`this \u662fnull \u6216\u8005 undefined`);\n  }\n  const arr = Object(this);\n  let flag = true;\n  for (let i = 0; i < arr.length; i++) {\n    const res = fn.call(thisValue, arr[i], i, arr);\n    if (!res) {\n      return false;\n    }\n  }\n  return flag;\n};\n'})}),"\n",(0,s.jsx)(n.h4,{id:"reduce-\u5b9e\u73b0\u4e00\u4e2a-map",children:"reduce \u5b9e\u73b0\u4e00\u4e2a map"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'Array.prototype.mapByreduce = function (fn, context = null) {\n  let arr = this;\n  if (typeof fn !== "function") {\n    throw new TypeError("is not a function");\n  }\n  return arr.reduce((pre, cur, index, array) => {\n    let res = fn.call(context, cur, index, array);\n    return [...pre, res];\n  }, []);\n};\n'})}),"\n",(0,s.jsx)(n.h3,{id:"14\u624b\u5199-promisify",children:"14.\u624b\u5199 promisify"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'function promisify(fn) {\n  console.log(fn, "fn"); // \u4fdd\u5b58\u7684\u662f\u539f\u59cb\u51fd\u6570(add)\n  return function (...args) {\n    console.log(...args, "...args"); // 2 6 \u4fdd\u5b58\u7684\u662f\u8c03\u7528\u65f6\u7684\u53c2\u6570\n    //\u8fd4\u56depromise\u5bf9\u8c61\n    return new Promise(function (resolve, reject) {\n      // \u5c06callback\u653e\u5230\u53c2\u6570\u672b\u5c3e,\u5e76\u6267\u884ccallback\u51fd\u6570\n      args.push(function (err, ...args) {\n        console.log(...args, "12"); // 2 6 callback,\n        if (err) {\n          reject(err);\n          return;\n        }\n        resolve(...args);\n      });\n\n      fn.apply(null, args);\n    });\n  };\n}\n\n// \u793a\u4f8b\nlet add = (a, b, callback) => {\n  let result = a + b;\n  if (typeof result === "number") {\n    callback(null, result);\n  } else {\n    callback("\u8bf7\u8f93\u5165\u6b63\u786e\u6570\u5b57");\n  }\n};\n\nconst addCall = promisify(add);\naddCall(2, 6).then((res) => {\n  console.log(res);\n});\n'})}),"\n",(0,s.jsxs)(n.p,{children:["\u624b\u52a8\u5b9e\u73b0\u4e00\u4e2a promisify \u51fd\u6570\u7684\u610f\u601d\u662f\uff1a\u6211\u4eec\u628a\u4e00\u4e2a\u5f02\u6b65\u8bf7\u6c42\u7684\u51fd\u6570\uff0c\u5c01\u88c5\u6210\u4e00\u4e2a\u53ef\u4ee5\u5177\u6709 ",(0,s.jsx)(n.code,{children:"then"}),"\u65b9\u6cd5\u7684\u51fd\u6570\uff0c\u5e76\u4e14\u5728",(0,s.jsx)(n.code,{children:"then"}),"\u65b9\u6cd5\u4e2d\u8fd4\u56de\u5f02\u6b65\u65b9\u6cd5\u6267\u884c\u7ed3\u679c\u7684\u8fd9\u4e48\u4e00\u4e2a\u51fd\u6570"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u5177\u6709 then \u65b9\u6cd5"}),"\n",(0,s.jsx)(n.li,{children:"then \u65b9\u6cd5\u91cc\u8fd4\u56de\u5f02\u6b65\u63a5\u53e3\u6267\u884c\u7ed3\u679c"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'// \u9996\u5148\u5b9a\u4e00\u4e2a\u9700\u8981\u8fdb\u884c promisify \u7684\u51fd\u6570\nfunction asyncFn(a, b, callback) {\n  // \u5f02\u6b65\u64cd\u4f5c\uff0c\u4f7f\u7528 setTimeout \u6a21\u62df\n  console.log("\u5f02\u6b65\u8bf7\u6c42\u53c2\u6570", a, b);\n  setTimeout(function () {\n    callback("\u5f02\u6b65\u8bf7\u6c42\u7ed3\u679c");\n  }, 3000);\n}\n\n// \u6211\u4eec\u5e0c\u671b\u8c03\u7528\u7684\u65b9\u5f0f\u662f\nconst proxy = promisify(asyncFn);\nproxy(11, 22).then((res) => {\n  // \u6b64\u5904\u8f93\u51fa\u5f02\u6b65\u51fd\u6570\u6267\u884c\u7ed3\u679c\n  console.log(res);\n});\n\n// \u5b9a\u4e49\u4e00\u4e2a\u65b9\u6cd5\uff0c \u9700\u8981\u9488\u5bf9\u5f02\u6b65\u65b9\u6cd5\u505a\u5c01\u88c5\uff0c\u6240\u4ee5\u9700\u8981\u4e00\u4e2a\u5165\u53c2\uff0c\u65e2\u9700\u8981promisify\u7684\u539f\u5f02\u6b65\u65b9\u6cd5\nfunction promisify(asyncFn) {\n  // \u65b9\u6cd5\u5185\u90e8\u6211\u4eec\u9700\u8981\u8c03\u7528asyncFn\u65b9\u6cd5\uff0c\u5e76\u4f20\u9012\u539f\u59cb\u53c2\u6570\uff0c\u6240\u4ee5\u9700\u8981\u8fd4\u56de\u4e00\u4e2a\u65b9\u6cd5\u6765\u63a5\u6536\u53c2\u6570\n  return function (...args) {\n    // \u7531\u4e8e\u9700\u8981\u63a5\u6536\u53c2\u6570\uff0c\u6240\u4ee5\u53c2\u6570\u6211\u4eec\u53ef\u4ee5\u5199\u4e3a...args\n    // \u6211\u4eec\u9700\u8981\u6267\u884c\u5f02\u6b65\u64cd\u4f5c\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u7ed3\u679c\uff0c\u6240\u4ee5\u8fd4\u56de\u4e00\u4e2a promise\u5b9e\u4f8b\n    return new Promise((resolve) => {\n      // asyncFn \u9700\u8981\u6267\u884c\u4e00\u4e2a\u56de\u8c03\uff0c\u6240\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u56de\u8c03\u65b9\u6cd5\n      const callback = function (...args) {\n        resolve(args);\n      };\n      args.push(callback);\n      asyncFn.apply(null, args);\n    });\n  };\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"function promisify(fn) {\n  return function (...args) {\n    return new Promise(function (resolve, reject) {\n      args.push(function (err, ...arg) {\n        if (err) {\n          reject(err);\n          return;\n        }\n        resolve(...arg);\n      });\n\n      fn.apply(null, args);\n    });\n  };\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"15\u7528-settimeout-\u5b9e\u73b0-setinterval",children:"15.\u7528 setTimeout \u5b9e\u73b0 setInterval"})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>i});var t=r(6540);const s={},l=t.createContext(s);function o(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);